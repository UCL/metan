{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}ipdmetan
       {txt}log:  {res}S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/metan_test_29Nov2021_log.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}29 Nov 2021, 22:50:11
{txt}
{com}. loc starttime "$S_TIME"
{txt}
{com}. 
. nois di _n(3)
{res}



{txt}
{com}. nois di `"Current directory:"' c(pwd)
{res}Current directory:N:\Documents
{txt}
{com}. nois di `"File run: `logname'.do"'
{res}File run: .do
{txt}
{com}. nois di `"Date file produced: $S_DATE $S_TIME"'
{res}Date file produced: 29 Nov 2021 22:50:11
{txt}
{com}. nois di `"--------------------------------------"'
{res}--------------------------------------
{txt}
{com}. nois di _n(3)
{res}



{txt}
{com}. 
. 
. ** Check that we're using the correct version
. // should be -metan-  v4.5  29nov2021
. //     and -ipdmetan- v4.3  29nov2021
. //     and  -metan9-  v3.04 (i.e. the version currently available via SSC)
. which ipdmetan
{txt}S:\MRCCTU_Methodology\Software\Meta-analysis\ipdmetan\Releases\version 4.03 (29nov2021)\ipdmetan.ado
{res}*! version 4.03  David Fisher  29nov2021
{txt}
{com}. which metan
{txt}S:\MRCCTU_Methodology\Software\Meta-analysis\metan\Releases\version 4.05 (29nov2021)\metan.ado
{res}*! version 4.05  29nov2021
*! Current version by David Fisher
*! Previous versions by Ross Harris and Michael Bradburn
{txt}
{com}. which metan9
{txt}S:\MRCCTU_Methodology\Software\Meta-analysis\metan\Releases\version 4.05 (29nov2021)\metan9.ado
{res}*! 3.04 21Sep2010
{txt}
{com}. 
. 
. tempfile testAD
{txt}
{com}. 
. use "$Datasets/ipdmetan_example.dta", clear
{txt}
{com}. stset tcens, fail(fail)

{txt}Survival-time data settings

{col 10}Failure event: {res}fail!=0 & fail<.
{col 1}{txt}Observed time interval: {res}(0, tcens]
{col 6}{txt}Exit on or before: {res}failure

{txt}{hline 74}
{res}      1,642{txt}  total observations
{res}          0{txt}  exclusions
{hline 74}
{res}      1,642{txt}  observations remaining, representing
{res}      1,082{txt}  failures in single-record/single-failure data
{res}  1,025.389{txt}  total analysis time at risk and under observation
                                                At risk from t = {res}        0
                                     {txt}Earliest observed entry t = {res}        0
                                          {txt}Last observed exit t = {res} 5.811862
{txt}
{com}. 
. 
. *** General functionality testing
. 
. * Indiviudal study results
. ipdmetan, study(trialid) nograph hr saving(`testAD', replace) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. bysort trialid: stcox trt, nolog

{txt}{hline}
-> trialid = London

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:176}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:176}
{txt}No. of failures = {res}{ralign 7:117}
{txt}Time at risk    = {res}{ralign 7:96.5585}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:4.19}
{txt}Log likelihood = {res}-483.6971{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0407}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} 1.465966{col 26}{space 2} .2750332{col 37}{space 1}    2.04{col 46}{space 3}0.041{col 54}{space 4} 1.014912{col 67}{space 3} 2.117483
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Paris

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:141}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:141}
{txt}No. of failures = {res}{ralign 7:96}
{txt}Time at risk    = {res}{ralign 7:92.7991}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:0.57}
{txt}Log likelihood = {res}-376.57989{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.4501}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} 1.170077{col 26}{space 2} .2429623{col 37}{space 1}    0.76{col 46}{space 3}0.449{col 54}{space 4} .7788709{col 67}{space 3} 1.757775
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Amsterdam

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:110}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:110}
{txt}No. of failures = {res}{ralign 7:80}
{txt}Time at risk    = {res}{ralign 7:55.9615}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:5.61}
{txt}Log likelihood = {res}-287.96346{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0179}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} 1.727143{col 26}{space 2} .3950626{col 37}{space 1}    2.39{col 46}{space 3}0.017{col 54}{space 4}  1.10313{col 67}{space 3} 2.704146
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Stockholm

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:69}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:69}
{txt}No. of failures = {res}{ralign 7:53}
{txt}Time at risk    = {res}{ralign 7:31.8008}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:0.85}
{txt}Log likelihood = {res}-174.33221{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.3556}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2}  1.29736{col 26}{space 2} .3645674{col 37}{space 1}    0.93{col 46}{space 3}0.354{col 54}{space 4} .7479403{col 67}{space 3} 2.250371
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Madrid

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:160}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:160}
{txt}No. of failures = {res}{ralign 7:108}
{txt}Time at risk    = {res}{ralign 7:94.2052}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:17.20}
{txt}Log likelihood = {res}-428.64005{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0000}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} 2.299209{col 26}{space 2} .4602632{col 37}{space 1}    4.16{col 46}{space 3}0.000{col 54}{space 4} 1.553038{col 67}{space 3} 3.403884
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = New York

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:115}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:115}
{txt}No. of failures = {res}{ralign 7:77}
{txt}Time at risk    = {res}{ralign 7:85.6946}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:1.34}
{txt}Log likelihood = {res}-293.72611{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.2464}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} .7609172{col 26}{space 2} .1793516{col 37}{space 1}   -1.16{col 46}{space 3}0.246{col 54}{space 4} .4794081{col 67}{space 3} 1.207729
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Chicago

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:238}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:238}
{txt}No. of failures = {res}{ralign 7:150}
{txt}Time at risk    = {res}{ralign 7:172.564}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:2.43}
{txt}Log likelihood = {res}-675.65815{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.1190}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} .7712281{col 26}{space 2} .1282836{col 37}{space 1}   -1.56{col 46}{space 3}0.118{col 54}{space 4} .5566686{col 67}{space 3} 1.068486
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Los Angeles

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 7:148}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:148}
{txt}No. of failures = {res}{ralign 7:99}
{txt}Time at risk    = {res}{ralign 7:88.8159}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:0.17}
{txt}Log likelihood = {res}-392.67621{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.6843}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} 1.086334{col 26}{space 2}  .221084{col 37}{space 1}    0.41{col 46}{space 3}0.684{col 54}{space 4} .7290078{col 67}{space 3} 1.618806
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = Toronto

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 8:316}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:316}
{txt}No. of failures = {res}{ralign 8:202}
{txt}Time at risk    = {res}{ralign 8:200.5543}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:0.42}
{txt}Log likelihood = {res}-960.57192{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.5172}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2}  1.09602{col 26}{space 2}  .155297{col 37}{space 1}    0.65{col 46}{space 3}0.518{col 54}{space 4} .8302523{col 67}{space 3}  1.44686
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{hline}
-> trialid = College Station, TX

{col 9}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Cox regression with no ties

No. of subjects = {res}{ralign 8:169}{col 57}{txt}{lalign 13:Number of obs} = {res}{ralign 6:169}
{txt}No. of failures = {res}{ralign 8:100}
{txt}Time at risk    = {res}{ralign 8:106.4355}
{col 57}{txt}{lalign 13:LR chi2({res:1})} = {res}{ralign 6:2.90}
{txt}Log likelihood = {res}-416.65395{col 57}{txt}{lalign 13:Prob > chi2} = {res}{ralign 6:0.0888}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}          _t{col 14}{c |} Haz. ratio{col 26}   Std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 9}trt {c |}{col 14}{res}{space 2} .7063668{col 26}{space 2}  .143747{col 37}{space 1}   -1.71{col 46}{space 3}0.088{col 54}{space 4} .4740335{col 67}{space 3} 1.052571
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. 
. * Random-effects options
. // (just test that they work; statistical validation is done for -metan- )
. ipdmetan, study(trialid) nograph re : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}DerSimonian-Laird{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.51
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.92
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.32
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.92
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.12
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.14
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.85
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, DL{col 22}{c |}{col 26}{res}  0.142{col 37} -0.090{col 47}  0.374{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.199{txt}  p = {res}0.230


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
{hline 21}{c TT}{hline 13}
Method{col 22}{c |}{col 28}tau{c 178}
{hline 21}{c +}{hline 13}
DL{col 22}{c |}{col 25}{res}  0.0985
{txt}{hline 21}{c BT}{hline 13}

{com}. ipdmetan, study(trialid) nograph re(fe) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan, study(trialid) nograph re(dl) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}DerSimonian-Laird{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.51
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.92
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.32
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.92
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.12
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.14
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.85
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, DL{col 22}{c |}{col 26}{res}  0.142{col 37} -0.090{col 47}  0.374{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.199{txt}  p = {res}0.230


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
{hline 21}{c TT}{hline 13}
Method{col 22}{c |}{col 28}tau{c 178}
{hline 21}{c +}{hline 13}
DL{col 22}{c |}{col 25}{res}  0.0985
{txt}{hline 21}{c BT}{hline 13}

{com}. ipdmetan, study(trialid) nograph re(vc) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}Hedges's{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.51
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.92
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.32
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.94
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.13
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.13
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.83
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, HE{col 22}{c |}{col 26}{res}  0.142{col 37} -0.091{col 47}  0.376{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.193{txt}  p = {res}0.233


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
{hline 21}{c TT}{hline 13}
Method{col 22}{c |}{col 28}tau{c 178}
{hline 21}{c +}{hline 13}
HE{col 22}{c |}{col 25}{res}  0.1000
{txt}{hline 21}{c BT}{hline 13}

{com}. ipdmetan, study(trialid) nograph re(sj2s) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with the {res}Sidik-Jonkman two-step tau{c 178} estimator
{txt}with {res}EV{txt} initial estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.48
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.94
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.37
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   8.06
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.19
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.05
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.05
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.69
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.05
{txt}{hline 21}{c +}{hline 46}
Overall, SJ2S{col 22}{c |}{col 26}{res}  0.143{col 37} -0.100{col 47}  0.385{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.154{txt}  p = {res}0.249


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
{hline 21}{c TT}{hline 13}
Method{col 22}{c |}{col 28}tau{c 178}
{hline 21}{c +}{hline 13}
SJ2S{col 22}{c |}{col 25}{res}  0.1106
{txt}{hline 21}{c BT}{hline 13}

{com}. ipdmetan, study(trialid) nograph re(mp) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}Mandel-Paule{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.50
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.93
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.96
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.14
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.11
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.81
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, MP{col 22}{c |}{col 26}{res}  0.142{col 37} -0.093{col 47}  0.377{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.187{txt}  p = {res}0.235


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
with Conf. Intervals as appropriate to the method (see {help metan:help metan})
{hline 21}{c TT}{hline 35}
Method{col 22}{c |}{col 28}tau{c 178}{col 36}[95% Conf. Interval]
{hline 21}{c +}{hline 35}
MP{col 22}{c |}{col 25}{res}  0.1016{txt}{col 35}{res}  0.0265{col 45}  0.4361
{txt}{hline 21}{c BT}{hline 35}

{com}. ipdmetan, study(trialid) nograph re(gamma) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}Biggerstaff-Tweedie approximate Gamma{txt} weighting
based on {res}DerSimonian-Laird{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.67
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.70
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   8.81
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.05
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.05
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   8.54
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.86
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.89
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  13.53
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.89
{txt}{hline 21}{c +}{hline 46}
Overall, BT{col 22}{c |}{col 26}{res}  0.138{col 37} -0.095{col 47}  0.371{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.164{txt}  p = {res}0.245


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
with Conf. Intervals as appropriate to the method (see {help metan:help metan})
{hline 21}{c TT}{hline 35}
Method{col 22}{c |}{col 28}tau{c 178}{col 36}[95% Conf. Interval]
{hline 21}{c +}{hline 35}
BT{col 22}{c |}{col 25}{res}  0.0985{txt}{col 35}{res}  0.0257{col 45}  0.4568
{txt}{hline 21}{c BT}{hline 35}

{com}. ipdmetan, study(trialid) nograph re(ml) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}ML{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.54
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.91
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.26
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.78
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.05
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.23
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  12.02
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, ML{col 22}{c |}{col 26}{res}  0.142{col 37} -0.082{col 47}  0.365{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.244{txt}  p = {res}0.213


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
with Conf. Intervals as appropriate to the method (see {help metan:help metan})
{hline 21}{c TT}{hline 35}
Method{col 22}{c |}{col 28}tau{c 178}{col 36}[95% Conf. Interval]
{hline 21}{c +}{hline 35}
ML/PL{col 22}{c |}{col 25}{res}  0.0878{txt}{col 35}{res}  0.0190{col 45}  0.3199
{txt}{hline 21}{c BT}{hline 35}

{com}. ipdmetan, study(trialid) nograph re(pl) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
estimated using {res}Profile Likelihood
{txt}based on {res}ML{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.54
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.91
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.26
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.78
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.05
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.23
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  12.02
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, PL{col 22}{c |}{col 26}{res}  0.142{col 37} -0.103{col 47}  0.390{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}LL z{txt} = {res}  1.205{txt}  p = {res}0.228


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
with Conf. Intervals as appropriate to the method (see {help metan:help metan})
{hline 21}{c TT}{hline 35}
Method{col 22}{c |}{col 28}tau{c 178}{col 36}[95% Conf. Interval]
{hline 21}{c +}{hline 35}
ML/PL{col 22}{c |}{col 25}{res}  0.0878{txt}{col 35}{res}  0.0190{col 45}  0.3199
{txt}{hline 21}{c BT}{hline 35}

{com}. ipdmetan, study(trialid) nograph re(reml) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}random-effects inverse-variance{txt} model
with {res}REML{txt} estimate of tau{c 178}
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.50
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.93
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   9.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   7.96
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.14
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   9.14
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  11.11
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.04
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  11.80
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.04
{txt}{hline 21}{c +}{hline 46}
Overall, REML{col 22}{c |}{col 26}{res}  0.142{col 37} -0.093{col 47}  0.378{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  1.184{txt}  p = {res}0.236


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}Gamma (random-effects){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.004{col 46}  2.755
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}    0.8%{col 45}   86.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)


Heterogeneity variance estimates
with Conf. Intervals as appropriate to the method (see {help metan:help metan})
{hline 21}{c TT}{hline 35}
Method{col 22}{c |}{col 28}tau{c 178}{col 36}[95% Conf. Interval]
{hline 21}{c +}{hline 35}
REML{col 22}{c |}{col 25}{res}  0.1023{txt}{col 35}{res}  0.0233{col 45}  0.3876
{txt}{hline 21}{c BT}{hline 35}

{com}. 
. * "by" option, missing values
. preserve
{txt}
{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.453{col 37}  0.264{col 47}  0.641{col 58}  41.57
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.710{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.40{col 39}  4{col 46}  0.171{col 59}37.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.75{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  13.19{col 35}  1{txt},{res}  8{col 46}  0.007
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}37.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         replace region=. in 1/10
{txt}(10 real changes made, 10 to missing)

{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1632

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.393{col 37}  0.011{col 47}  0.775{col 58}  10.19
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.97
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.39
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.90
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.65
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.457{col 37}  0.266{col 47}  0.647{col 58}  41.11
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.96
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.98
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.34
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.27
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.89
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.125{col 37}  0.003{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.015{txt}{col 35}p = {res}0.044


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.36{col 39}  4{col 46}  0.174{col 59}37.1%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  31.74{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.81{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  13.28{col 35}  1{txt},{res}  8{col 46}  0.007
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}37.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         cap nois ipdmetan, study(trialid) nograph by(region, m) : stcox trt             // should give error ('by' not constant within trials)
{res}{err}Data is not suitable for meta-analysis
  as variable {bf:region} (in option {bf:by()}) is not constant within studies.
Use either the (undocumented) option {bf:by(}{it:varname}{bf:, force)}, or the alternative command {bf:ipdover}.
For more details on the reasoning behind this, see:
  {browse "https://www.bmj.com/content/356/bmj.j573":Fisher DJ et al. BMJ 2017; 356: j573}
Error in {bf:ipdmetan.ProcessIDs}
{txt}
{com}.         replace region=.a if trialid==1
{txt}(176 real changes made, 176 to missing)

{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}9
{txt}Participants included: {res}1466

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   9.99
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   8.23
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   5.45
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}  10.75
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.477{col 37}  0.258{col 47}  0.697{col 58}  34.43
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   7.75
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  15.57
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}  10.40
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  21.45
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}  10.40
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  65.57
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.095{col 37} -0.034{col 47}  0.224{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.268{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.446{txt}{col 35}p = {res}0.148


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.22{col 39}  3{col 46}  0.102{col 59}51.7%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  29.63{col 39}  8{col 46}  0.000{col 59}73.0%
{txt}Between{col 22}{c |}{col 26}{res}  17.84{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  10.59{col 35}  1{txt},{res}  7{col 46}  0.014
{txt}{hline 21}{c BT}{hline 44}
Note: Moderate heterogeneity observed (I{c 178} up to {res}51.7%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups are likely to be invalid

{com}.         ipdmetan, study(trialid) nograph by(region, m) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.477{col 37}  0.258{col 47}  0.697{col 58}  30.67
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
.a{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.268{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}.a   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.22{col 39}  3{col 46}  0.102{col 59}51.7%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}.a{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.93{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   5.92{col 35}  2{txt},{res}  7{col 46}  0.031
{txt}{hline 21}{c BT}{hline 44}
Note: Moderate heterogeneity observed (I{c 178} up to {res}51.7%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups are likely to be invalid

{com}.         replace region=_pi if trialid==1
{txt}(176 real changes made)

{com}.         cap nois ipdmetan, study(trialid) nograph by(region) : stcox trt                // should give error (non-integer)
{res}{err}variable {bf:region} in option {bf:by()} must be integer-valued or string
{txt}
{com}.         replace region=100000 if trialid==1
{txt}(176 real changes made)

{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.477{col 37}  0.258{col 47}  0.697{col 58}  30.67
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.268{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.22{col 39}  3{col 46}  0.102{col 59}51.7%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.93{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   5.92{col 35}  2{txt},{res}  7{col 46}  0.031
{txt}{hline 21}{c BT}{hline 44}
Note: Moderate heterogeneity observed (I{c 178} up to {res}51.7%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups are likely to be invalid

{com}. 
.         replace trialid=.b in 203/213
{txt}(11 real changes made, 11 to missing)

{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1631

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.27
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.39
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.89
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.254{col 47}  0.698{col 58}  30.19
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.96
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.97
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.33
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.25
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.33
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.83
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.98
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.98
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.123{col 37}  0.001{col 47}  0.245{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.206{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.984{txt}{col 35}p = {res}0.047


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  3{col 46}  0.090{col 59}53.9%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.70{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.62{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   5.69{col 35}  2{txt},{res}  7{col 46}  0.034
{txt}{hline 21}{c BT}{hline 44}
Note: Moderate heterogeneity observed (I{c 178} up to {res}53.9%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups are likely to be invalid

{com}.         ipdmetan, study(trialid) nograph by(region, m) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1631

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.27
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.39
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.89
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.254{col 47}  0.698{col 58}  30.19
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.96
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.97
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.33
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.25
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.33
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.83
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.98
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.98
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.123{col 37}  0.001{col 47}  0.245{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.206{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.984{txt}{col 35}p = {res}0.047


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  3{col 46}  0.090{col 59}53.9%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.70{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.62{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   5.69{col 35}  2{txt},{res}  7{col 46}  0.034
{txt}{hline 21}{c BT}{hline 44}
Note: Moderate heterogeneity observed (I{c 178} up to {res}53.9%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups are likely to be invalid

{com}.         ipdmetan, study(trialid, m) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}.b{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         ipdmetan, study(trialid, m) nograph by(region, m) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}.b{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. 
.         replace trialid=_pi in 203/213
{txt}(11 real changes made)

{com}.         cap nois ipdmetan, study(trialid) nograph by(region) : stcox trt                // should give error (non-integer)
{res}{err}variable {bf:trialid} in option {bf:study()} must be integer-valued or string
Error in {bf:ipdmetan.ProcessIDs}
{txt}
{com}. 
.         replace trialid=100000 in 203/213
{txt}(11 real changes made)

{com}.         ipdmetan, study(trialid) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}100000{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         ipdmetan, study(trialid) nograph by(region, m) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}100000{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         ipdmetan, study(trialid, m) nograph by(region) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}100000{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}.         ipdmetan, study(trialid, m) nograph by(region, m) : stcox trt
{res}
{txt}Studies included: {res}11
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.124{col 37} -0.299{col 47}  0.548{col 58}   8.22
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.34
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}100000{res}{txt}{col 22}{c |}{col 26}{res}  0.466{col 37} -1.054{col 47}  1.986{col 58}   0.64
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.476{col 37}  0.256{col 47}  0.695{col 58}  30.64
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.88
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.45
{txt}{hline 21}{c +}{hline 46}
100000{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.91
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.004{col 47}  0.247{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.249{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}100000   {res}{col 22}z{txt} = {res}  2.039{txt}{col 35}p = {res}0.041
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.026{txt}{col 35}p = {res}0.043


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.50{col 39}  4{col 46}  0.165{col 59}38.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}100000{col 22}{c |}{col 26}{res}   0.00{col 39}  0{col 46}      .{col 59}   .
{txt}Overall{col 22}{c |}{col 26}{res}  31.90{col 39} 10{col 46}  0.000{col 59}68.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.82{col 39}  2{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   6.56{col 35}  2{txt},{res}  8{col 46}  0.021
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}38.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. restore
{txt}
{com}. 
. * analysis commands using multiple equations
. ipdmetan, study(trialid) nograph : stcox trt, tvc(trt)
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} main:trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.370{col 37} -0.185{col 47}  0.926{col 58}  10.89
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.278{col 37} -0.305{col 47}  0.861{col 58}   9.87
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.979{col 37}  0.325{col 47}  1.634{col 58}   7.84
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.728{col 37} -0.113{col 47}  1.569{col 58}   4.75
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.823{col 37}  0.271{col 47}  1.375{col 58}  11.01
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.016{col 37} -0.692{col 47}  0.723{col 58}   6.71
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.044{col 37} -0.580{col 47}  0.492{col 58}  11.70
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.525{col 37} -0.106{col 47}  1.156{col 58}   8.43
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.144{col 37} -0.273{col 47}  0.561{col 58}  19.32
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.600{col 37} -1.195{col 47} -0.005{col 58}   9.49
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.281{col 37}  0.097{col 47}  0.464{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  3.002{txt}  p = {res}0.003


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  20.62{col 39}  9{col 46}  0.014
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.514{col 36}  1.000{col 46}  2.075
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   56.4%{col 35}    0.0%{col 45}   76.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan, study(trialid) nograph nototal poolvar(trt) : stcox trt, tvc(trt)
{res}
{error}Caution: initial model fitting in full sample was suppressed

{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.370{col 37} -0.185{col 47}  0.926{col 58}  10.89
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.278{col 37} -0.305{col 47}  0.861{col 58}   9.87
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.979{col 37}  0.325{col 47}  1.634{col 58}   7.84
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.728{col 37} -0.113{col 47}  1.569{col 58}   4.75
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.823{col 37}  0.271{col 47}  1.375{col 58}  11.01
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.016{col 37} -0.692{col 47}  0.723{col 58}   6.71
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.044{col 37} -0.580{col 47}  0.492{col 58}  11.70
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.525{col 37} -0.106{col 47}  1.156{col 58}   8.43
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.144{col 37} -0.273{col 47}  0.561{col 58}  19.32
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.600{col 37} -1.195{col 47} -0.005{col 58}   9.49
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.281{col 37}  0.097{col 47}  0.464{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  3.002{txt}  p = {res}0.003


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  20.62{col 39}  9{col 46}  0.014
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.514{col 36}  1.000{col 46}  2.075
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   56.4%{col 35}    0.0%{col 45}   76.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan, study(trialid) nograph nototal poolvar(main:trt) : stcox trt, tvc(trt)
{res}
{error}Caution: initial model fitting in full sample was suppressed

{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} main:trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.370{col 37} -0.185{col 47}  0.926{col 58}  10.89
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.278{col 37} -0.305{col 47}  0.861{col 58}   9.87
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.979{col 37}  0.325{col 47}  1.634{col 58}   7.84
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.728{col 37} -0.113{col 47}  1.569{col 58}   4.75
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.823{col 37}  0.271{col 47}  1.375{col 58}  11.01
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.016{col 37} -0.692{col 47}  0.723{col 58}   6.71
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.044{col 37} -0.580{col 47}  0.492{col 58}  11.70
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.525{col 37} -0.106{col 47}  1.156{col 58}   8.43
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.144{col 37} -0.273{col 47}  0.561{col 58}  19.32
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.600{col 37} -1.195{col 47} -0.005{col 58}   9.49
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.281{col 37}  0.097{col 47}  0.464{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  3.002{txt}  p = {res}0.003


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  20.62{col 39}  9{col 46}  0.014
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.514{col 36}  1.000{col 46}  2.075
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   56.4%{col 35}    0.0%{col 45}   76.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan, study(trialid) nograph poolvar(main:trt) : stcox trt, tvc(trt)
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} main:trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.370{col 37} -0.185{col 47}  0.926{col 58}  10.89
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.278{col 37} -0.305{col 47}  0.861{col 58}   9.87
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.979{col 37}  0.325{col 47}  1.634{col 58}   7.84
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.728{col 37} -0.113{col 47}  1.569{col 58}   4.75
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.823{col 37}  0.271{col 47}  1.375{col 58}  11.01
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.016{col 37} -0.692{col 47}  0.723{col 58}   6.71
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.044{col 37} -0.580{col 47}  0.492{col 58}  11.70
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.525{col 37} -0.106{col 47}  1.156{col 58}   8.43
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.144{col 37} -0.273{col 47}  0.561{col 58}  19.32
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.600{col 37} -1.195{col 47} -0.005{col 58}   9.49
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.281{col 37}  0.097{col 47}  0.464{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  3.002{txt}  p = {res}0.003


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  20.62{col 39}  9{col 46}  0.014
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.514{col 36}  1.000{col 46}  2.075
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   56.4%{col 35}    0.0%{col 45}   76.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. * "by" and aggregate data
. qui ipdmetan, study(trialid) hr nograph nooverall saving(`testAD', replace) : stcox trt if region==1, strata(sex)
{txt}
{com}. clonevar _STUDY=trialid         // N.B. this is only needed since I'm re-using my IPD dataset as an AD dataset;
{txt}
{com}.                                                         // "real-life" users shouldn't need to do this (& same goes for later variations of this)
. ipdmetan, study(_STUDY) hr ad(`testAD', vars(_ES _seES) npts(_NN) byad) nooverall nograph : stcox trt if region==2, strata(sex)
{res}{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Data source and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
IPD{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}  11.96
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  24.06
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}  15.79
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  32.33
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}  15.86
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.885{col 37}  0.754{col 47}  1.039{col 58} 100.00
{txt}{hline 21}{c +}{hline 46}
Aggregate data{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  21.63
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
IPD   {res}{col 22}z{txt} = {res} -1.495{txt}{col 35}p = {res}0.135
{txt}Aggregate data   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrix {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
IPD{col 22}{c |}{col 26}{res}   5.40{col 39}  4{col 46}  0.249{col 59}25.9%
{txt}Aggregate data{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}  20.98{col 39}  1{col 46}  0.000
{txt}{hline 21}{c BT}{hline 44}

{com}. ipdmetan, study(_STUDY) hr ad(`testAD', vars(_ES _seES) npts(_NN)) by(region) nograph : stcox trt if region==2, strata(sex)
{res}{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}   7.10
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  14.29
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}   9.38
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  19.21
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}   9.42
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.885{col 37}  0.754{col 47}  1.039{col 58}  59.41
{txt}{hline 21}{c +}{hline 46}
Aggregate data{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  10.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}   8.78
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   6.68
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   4.73
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}   9.47
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58}  40.59
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.123{col 37}  0.993{col 47}  1.271{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
North America   {res}{col 22}z{txt} = {res} -1.495{txt}{col 35}p = {res}0.135
{txt}Aggregate data   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.846{txt}{col 35}p = {res}0.065


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
North America{col 22}{c |}{col 26}{res}   5.40{col 39}  4{col 46}  0.249{col 59}25.9%
{txt}Aggregate data{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Overall{col 22}{c |}{col 26}{res}  31.39{col 39}  9{col 46}  0.000{col 59}71.3%
{txt}Between{col 22}{c |}{col 26}{res}  20.98{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  16.13{col 35}  1{txt},{res}  8{col 46}  0.004
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}25.9%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. ipdmetan, study(_STUDY) hr ad(`testAD', vars(_ES _seES) npts(_NN) byad) nooverall ///
>         plotid(_BYAD) forest(ci1opt(lcolor(red)) ci2opt(lcolor(green))) : stcox trt if region==2, strata(sex)
{res}{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Data source and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
IPD{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}  11.96
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  24.06
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}  15.79
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  32.33
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}  15.86
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.885{col 37}  0.754{col 47}  1.039{col 58} 100.00
{txt}{hline 21}{c +}{hline 46}
Aggregate data{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  21.63
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
IPD   {res}{col 22}z{txt} = {res} -1.495{txt}{col 35}p = {res}0.135
{txt}Aggregate data   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrix {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
IPD{col 22}{c |}{col 26}{res}   5.40{col 39}  4{col 46}  0.249{col 59}25.9%
{txt}Aggregate data{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}  20.98{col 39}  1{col 46}  0.000
{txt}{hline 21}{c BT}{hline 44}

{res}{txt}
{com}. graph save "$Graphs/ipdm_gr1"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr1} saved as .gph format

{com}. drop _STUDY
{txt}
{com}. 
. * some subgroups only appear in aggregate data
. * N.B. RUN THIS AND NEXT BIT ("aggregate data alone") TOGETHER
. recode trialid (1 2 = 1 "Subgroup 1") (3 4 5 = 2 "Subgroup 2") (6 7 = 3 "Subgroup 3") (8 9 10 = 4 "Subgroup 4"), gen(subgroup) label(subgroup)
{txt}(1466 differences between {bf:trialid} and {bf:subgroup})

{com}. decode subgroup, gen(subgroupstr)
{txt}
{com}. qui ipdmetan, study(trialid) hr nograph nooverall saving(`testAD', replace) lcols(subgroup subgroupstr) : stcox trt if region==1, strata(sex)
{txt}
{com}. clonevar _STUDY=trialid
{txt}
{com}. ipdmetan, study(_STUDY) hr ad(`testAD', vars(_ES _seES) npts(_NN)) by(subgroup) nograph : stcox trt if region==2, strata(sex)
{res}{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  10.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}   8.78
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  19.71
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   6.68
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   4.73
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}   9.47
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  20.88
{txt}{hline 21}{c +}{hline 46}
Subgroup 3{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}   7.10
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  14.29
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.763{col 37}  0.584{col 47}  0.996{col 58}  21.40
{txt}{hline 21}{c +}{hline 46}
Subgroup 4{col 22}{c |}
Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}   9.38
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  19.21
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}   9.42
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.962{col 37}  0.787{col 47}  1.176{col 58}  38.01
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.123{col 37}  0.993{col 47}  1.271{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Subgroup 3   {res}{col 22}z{txt} = {res} -1.988{txt}{col 35}p = {res}0.047
{txt}Subgroup 4   {res}{col 22}z{txt} = {res} -0.378{txt}{col 35}p = {res}0.706
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.846{txt}{col 35}p = {res}0.065


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Subgroup 3{col 22}{c |}{col 26}{res}   0.02{col 39}  1{col 46}  0.875{col 59} 0.0%
{txt}Subgroup 4{col 22}{c |}{col 26}{res}   3.51{col 39}  2{col 46}  0.173{col 59}43.1%
{txt}Overall{col 22}{c |}{col 26}{res}  31.39{col 39}  9{col 46}  0.000{col 59}71.3%
{txt}Between{col 22}{c |}{col 26}{res}  25.63{col 39}  3{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   8.91{col 35}  3{txt},{res}  6{col 46}  0.013
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}43.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. ipdmetan, study(_STUDY) hr ad(`testAD', vars(_ES _seES) npts(_NN)) by(subgroupstr) nograph : stcox trt if region==2, strata(sex)
{res}{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 3{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}   7.10
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  14.29
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.763{col 37}  0.584{col 47}  0.996{col 58}  21.40
{txt}{hline 21}{c +}{hline 46}
Subgroup 4{col 22}{c |}
Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}   9.38
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  19.21
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}   9.42
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.962{col 37}  0.787{col 47}  1.176{col 58}  38.01
{txt}{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  10.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}   8.78
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  19.71
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   6.68
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   4.73
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}   9.47
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  20.88
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.123{col 37}  0.993{col 47}  1.271{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Subgroup 3   {res}{col 22}z{txt} = {res} -1.988{txt}{col 35}p = {res}0.047
{txt}Subgroup 4   {res}{col 22}z{txt} = {res} -0.378{txt}{col 35}p = {res}0.706
{txt}Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.846{txt}{col 35}p = {res}0.065


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 3{col 22}{c |}{col 26}{res}   0.02{col 39}  1{col 46}  0.875{col 59} 0.0%
{txt}Subgroup 4{col 22}{c |}{col 26}{res}   3.51{col 39}  2{col 46}  0.173{col 59}43.1%
{txt}Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}  31.39{col 39}  9{col 46}  0.000{col 59}71.3%
{txt}Between{col 22}{c |}{col 26}{res}  25.63{col 39}  3{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   8.91{col 35}  3{txt},{res}  6{col 46}  0.013
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}43.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. // no subgroup titles if numeric var is used
. // N.B. order is 3, 4, 1, 2 -- this is correct in terms of IPD followed by AD
. 
. * aggregate data alone
. preserve
{txt}
{com}.         use `testAD', clear
{txt}(Results set created by ipdmetan)

{com}.         rename (_ES _seES _NN _STUDY) (es se npts trialid)
{res}{txt}
{com}.         
.         metan es se, nograph

{txt}Studies included: {res}5
{txt}Participants included: {res}Unknown

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
Study{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}2{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}3{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}4{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}5{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  4.707{txt}  p = {res}0.000


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.119{col 36}  1.000{col 46}  1.851
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   20.1%{col 35}    0.0%{col 45}   70.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}.         metan es se, nograph study(trialid) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  4.707{txt}  p = {res}0.000


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.119{col 36}  1.000{col 46}  1.851
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   20.1%{col 35}    0.0%{col 45}   70.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}.         metan es se, nograph study(trialid) by(subgroup) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         
.         replace subgroup=. if subgroup==3
{txt}(0 real changes made)

{com}.         replace subgroupstr="" if subgroupstr=="Subgroup 3"
{txt}(0 real changes made)

{com}.         
.         metan es se, nograph study(trialid) by(subgroup) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         metan es se, nograph study(trialid) by(subgroup, m) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         metan es se, nograph study(trialid) by(subgroupstr) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         metan es se, nograph study(trialid) by(subgroupstr, m) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}. 
.         save, replace
{txt}{p 0 4 2}
file {bf}
C:\Users\rmjldfi\AppData\Local\Temp\ST_2c88_000001.tmp{rm}
saved
as .dta format
{p_end}

{com}. restore
{txt}
{com}. 
. ipdmetan, study(_STUDY) eform ad(`testAD', vars(es se) npts(npts)) by(subgroup) nograph : stcox trt if region==2, strata(sex)
{res}{error}Note: variable {bf:_STUDY} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
11{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  10.93
{txt}12{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}   8.78
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  19.71
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
13{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   6.68
{txt}14{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   4.73
{txt}15{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}   9.47
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  20.88
{txt}{hline 21}{c +}{hline 46}
Subgroup 3{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}   7.10
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  14.29
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.763{col 37}  0.584{col 47}  0.996{col 58}  21.40
{txt}{hline 21}{c +}{hline 46}
Subgroup 4{col 22}{c |}
Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}   9.38
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  19.21
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}   9.42
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.962{col 37}  0.787{col 47}  1.176{col 58}  38.01
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.123{col 37}  0.993{col 47}  1.271{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Subgroup 3   {res}{col 22}z{txt} = {res} -1.988{txt}{col 35}p = {res}0.047
{txt}Subgroup 4   {res}{col 22}z{txt} = {res} -0.378{txt}{col 35}p = {res}0.706
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.846{txt}{col 35}p = {res}0.065


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Subgroup 3{col 22}{c |}{col 26}{res}   0.02{col 39}  1{col 46}  0.875{col 59} 0.0%
{txt}Subgroup 4{col 22}{c |}{col 26}{res}   3.51{col 39}  2{col 46}  0.173{col 59}43.1%
{txt}Overall{col 22}{c |}{col 26}{res}  31.39{col 39}  9{col 46}  0.000{col 59}71.3%
{txt}Between{col 22}{c |}{col 26}{res}  25.63{col 39}  3{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   8.91{col 35}  3{txt},{res}  6{col 46}  0.013
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}43.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. cap nois ipdmetan, study(trialid) eform ad(`testAD', vars(es se) npts(npts)) by(subgroup, m) nograph : stcox trt if region==2, strata(sex)
{res}
{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}986

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
RECODE of trialid{col 22}{c |}                       
(Trial name) and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  10.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}   8.78
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  19.71
{txt}{hline 21}{c +}{hline 46}
2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   6.68
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   4.73
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}   9.47
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  20.88
{txt}{hline 21}{c +}{hline 46}
Subgroup 3{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.740{col 37}  0.465{col 47}  1.176{col 58}   7.10
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.774{col 37}  0.558{col 47}  1.074{col 58}  14.29
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.763{col 37}  0.584{col 47}  0.996{col 58}  21.40
{txt}{hline 21}{c +}{hline 46}
Subgroup 4{col 22}{c |}
Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.058{col 37}  0.707{col 47}  1.584{col 58}   9.38
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.082{col 37}  0.816{col 47}  1.434{col 58}  19.21
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.689{col 37}  0.461{col 47}  1.031{col 58}   9.42
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.962{col 37}  0.787{col 47}  1.176{col 58}  38.01
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.123{col 37}  0.993{col 47}  1.271{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Subgroup 3   {res}{col 22}z{txt} = {res} -1.988{txt}{col 35}p = {res}0.047
{txt}Subgroup 4   {res}{col 22}z{txt} = {res} -0.378{txt}{col 35}p = {res}0.706
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  1.846{txt}{col 35}p = {res}0.065


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Subgroup 3{col 22}{c |}{col 26}{res}   0.02{col 39}  1{col 46}  0.875{col 59} 0.0%
{txt}Subgroup 4{col 22}{c |}{col 26}{res}   3.51{col 39}  2{col 46}  0.173{col 59}43.1%
{txt}Overall{col 22}{c |}{col 26}{res}  31.39{col 39}  9{col 46}  0.000{col 59}71.3%
{txt}Between{col 22}{c |}{col 26}{res}  25.63{col 39}  3{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   8.91{col 35}  3{txt},{res}  6{col 46}  0.013
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}43.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. cap drop subgroup
{txt}
{com}. cap drop subgroupstr
{txt}
{com}. cap drop _STUDY
{txt}
{com}. * END OF SECTION
. 
. * string trial/subgroup
. decode trialid, gen(trialstr)
{txt}
{com}. decode region, gen(regionstr)
{txt}
{com}. ipdmetan, study(trialstr) nograph by(regionstr) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.453{col 37}  0.264{col 47}  0.641{col 58}  41.57
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res} -0.106{col 37} -0.265{col 47}  0.053{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.710{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.40{col 39}  4{col 46}  0.171{col 59}37.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.75{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  13.19{col 35}  1{txt},{res}  8{col 46}  0.007
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}37.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. ipdmetan, study(trialstr) eform ad(`testAD', vars(es se) npts(npts)) by(regionstr) nograph : stcox trt if region==1, strata(sex)
{res}{error}Note: variable {bf:trialstr} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}656

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58}  50.00
{txt}{hline 21}{c +}{hline 46}
Aggregate data{col 22}{c |}
6{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}7{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}8{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}9{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}10{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58}  50.00
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.389{col 47}  1.828{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000
{txt}Aggregate data   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  6.656{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Aggregate data{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Overall{col 22}{c |}{col 26}{res}  10.01{col 39}  9{col 46}  0.349{col 59}10.1%
{txt}Between{col 22}{c |}{col 26}{res}   0.00{col 39}  1{col 46}  1.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   0.00{col 35}  1{txt},{res}  8{col 46}  1.000
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}20.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. cap nois ipdmetan, study(trialstr) eform ad(`testAD', vars(es se) npts(npts)) by(foobar) nograph : stcox trt if region==1, strata(sex)
{res}{err}variable {bf:foobar} not found in either IPD or AD dataset
Error in {bf:ipdmetan.ProcessAD}
{txt}
{com}. // latter should give error (byvar not found)
. 
. 
. * string trial/subgroup continued -- testing with aggregate data
. preserve
{txt}
{com}.         use `testAD', clear
{txt}(Results set created by ipdmetan)

{com}.         gen subgpstr2 = "Subgroup 1" if subgroup==1
{txt}(3 missing values generated)

{com}.         replace subgpstr2 = "Subgroup 2" if subgroup!=1
{txt}(3 real changes made)

{com}.         metan es se, nograph study(trialid) by(subgpstr2) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
subgpstr2 and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         replace subgpstr2 = "" if subgroup!=1
{txt}(3 real changes made)

{com}.         metan es se, nograph study(trialid) by(subgpstr2, m) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
subgpstr2 and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         save, replace
{txt}{p 0 4 2}
file {bf}
C:\Users\rmjldfi\AppData\Local\Temp\ST_2c88_000001.tmp{rm}
saved
as .dta format
{p_end}

{com}. restore
{txt}
{com}. ipdmetan, study(trialstr) eform ad(`testAD', vars(es se) npts(npts)) by(subgpstr2, m) nograph : stcox trt if region==1, strata(sex)
{res}{error}Note: variable {bf:trialstr} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}656

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
subgpstr2 and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
IPD{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.312{col 47}  1.934{col 58}  50.00
{txt}{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
6{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}7{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  24.28
{txt}{hline 21}{c +}{hline 46}
.{col 22}{c |}
8{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}9{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}10{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  25.72
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.389{col 47}  1.828{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
IPD   {res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000
{txt}Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}.   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  6.656{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
IPD{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}.{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}  10.01{col 39}  9{col 46}  0.349{col 59}10.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  2{col 46}  0.247
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   1.35{col 35}  2{txt},{res}  7{col 46}  0.318
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}20.1%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. recode trialid (1 2 = 1 "Subgroup 1") (3 4 5 = 2 "Subgroup 2") (6 7 = 3 "Subgroup 3") (8 9 10 = 4 "Subgroup 4"), gen(subgroup) label(subgroup)
{txt}(1466 differences between {bf:trialid} and {bf:subgroup})

{com}. gen subgpstr2 = "Subgroup 1" if subgroup==1
{txt}(1,325 missing values generated)

{com}. replace subgpstr2 = "Subgroup 2" if subgroup!=1
{txt}(1,325 real changes made)

{com}. ipdmetan, study(trialstr) eform ad(`testAD', vars(es se) npts(npts)) by(subgpstr2, m) nograph : stcox trt if region==1, strata(sex)
{res}{error}Note: variable {bf:trialstr} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}656

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
subgpstr2 and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}6{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}7{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.104{col 47}  1.636{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  25.72
{txt}{hline 21}{c +}{hline 46}
.{col 22}{c |}
8{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}9{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}10{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  25.72
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.389{col 47}  1.828{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.943{txt}{col 35}p = {res}0.003
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}.   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  6.656{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   1.07{col 39}  3{col 46}  0.785{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}.{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}  10.01{col 39}  9{col 46}  0.349{col 59}10.1%
{txt}Between{col 22}{c |}{col 26}{res}   5.59{col 39}  2{col 46}  0.061
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   4.42{col 35}  2{txt},{res}  7{col 46}  0.057
{txt}{hline 21}{c BT}{hline 44}

{com}. 
. 
. * string trial/subgroup continued -- missing values in aggregate data
. cap drop subgroup
{txt}
{com}. preserve
{txt}
{com}.         use `testAD', clear
{txt}(Results set created by ipdmetan)

{com}.         cap drop subgpstr2
{txt}
{com}.         gen subgpstr2 = 10 if subgroup==1
{txt}(3 missing values generated)

{com}.         replace subgpstr2 = .a if subgroup!=1
{txt}(3 real changes made, 3 to missing)

{com}.         metan es se, nograph study(trialid) by(subgpstr2, m) npts(npts)

{txt}Studies included: {res}5
{txt}Participants included: {res}656

{txt}Meta-analysis pooling of aggregate data
using the {res}common-effect inverse-variance{txt} model

{hline 21}{c TT}{hline 46}
Subgroup and{col 22}{c |}                       
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
10{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}  26.93
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}  21.63
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.296{col 37}  0.017{col 47}  0.574{col 58}  48.56
{txt}{hline 21}{c +}{hline 46}
.a{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}  16.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}  11.64
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}  23.34
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.627{col 37}  0.356{col 47}  0.897{col 58}  51.44
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.466{col 37}  0.272{col 47}  0.660{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}0{txt}:
10   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}.a   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  4.707{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
10{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}.a{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}   5.01{col 39}  4{col 46}  0.287{col 59}20.1%
{txt}Between{col 22}{c |}{col 26}{res}   2.79{col 39}  1{col 46}  0.095
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   3.78{col 35}  1{txt},{res}  3{col 46}  0.147
{txt}{hline 21}{c BT}{hline 44}

{com}.         save, replace
{txt}{p 0 4 2}
file {bf}
C:\Users\rmjldfi\AppData\Local\Temp\ST_2c88_000001.tmp{rm}
saved
as .dta format
{p_end}

{com}. restore
{txt}
{com}. ipdmetan, study(trialstr) eform ad(`testAD', vars(es se) npts(npts)) by(subgpstr2, m) nograph : stcox trt if region==1, strata(sex)
{res}{error}Note: variable {bf:trialstr} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}656

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}656

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
subgpstr2 and{col 22}{c |}                       
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Subgroup 1{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  24.28
{txt}{hline 21}{c +}{hline 46}
Subgroup 2{col 22}{c |}
Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  25.72
{txt}{hline 21}{c +}{hline 46}
10{col 22}{c |}
6{res}{txt}{col 22}{c |}{col 26}{res}  1.475{col 37}  1.015{col 47}  2.143{col 58}  13.47
{txt}7{res}{txt}{col 22}{c |}{col 26}{res}  1.197{col 37}  0.789{col 47}  1.816{col 58}  10.81
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.344{col 37}  1.017{col 47}  1.775{col 58}  24.28
{txt}{hline 21}{c +}{hline 46}
.a{col 22}{c |}
8{res}{txt}{col 22}{c |}{col 26}{res}  1.742{col 37}  1.080{col 47}  2.810{col 58}   8.23
{txt}9{res}{txt}{col 22}{c |}{col 26}{res}  1.440{col 37}  0.816{col 47}  2.542{col 58}   5.82
{txt}10{res}{txt}{col 22}{c |}{col 26}{res}  2.242{col 37}  1.501{col 47}  3.350{col 58}  11.67
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.871{col 37}  1.428{col 47}  2.452{col 58}  25.72
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.593{col 37}  1.389{col 47}  1.828{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Subgroup 1   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}Subgroup 2   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}10   {res}{col 22}z{txt} = {res}  2.081{txt}{col 35}p = {res}0.037
{txt}.a   {res}{col 22}z{txt} = {res}  4.540{txt}{col 35}p = {res}0.000
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  6.656{txt}{col 35}p = {res}0.000


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Subgroup 1{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}Subgroup 2{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}10{col 22}{c |}{col 26}{res}   0.53{col 39}  1{col 46}  0.465{col 59} 0.0%
{txt}.a{col 22}{c |}{col 26}{res}   1.68{col 39}  2{col 46}  0.432{col 59} 0.0%
{txt}Overall{col 22}{c |}{col 26}{res}  10.01{col 39}  9{col 46}  0.349{col 59}10.1%
{txt}Between{col 22}{c |}{col 26}{res}   5.59{col 39}  3{col 46}  0.134
{txt}Between:Within (F){col 22}{c |}{col 26}{res}   2.52{col 35}  3{txt},{res}  6{col 46}  0.154
{txt}{hline 21}{c BT}{hline 44}

{com}. cap drop trialstr
{txt}
{com}. cap drop regionstr
{txt}
{com}. cap drop subgpstr2
{txt}
{com}. 
. * interactions
. cap drop subgroup
{txt}
{com}. ipdmetan, study(trialid) interaction hr keepall nograph : stcox trt##c.stage
{res}
{txt}Studies included: {res}7
{txt}  plus {res}3{txt} studies with insufficient data
Participants included: {res}1187
{txt}  plus {res}Unknown{txt} participants with insufficient data

Meta-analysis pooling of interaction effect estimate{res} 1.trt#c.stage
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  Interact.            
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.566{col 37}  0.954{col 47}  2.570{col 58}  12.45
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.389{col 37}  0.693{col 47}  2.785{col 58}   6.32
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.076{col 37}  1.295{col 47}  3.329{col 58}  13.70
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.987{col 37}  0.565{col 47}  1.724{col 58}   9.83
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.980{col 37}  0.656{col 47}  1.464{col 58}  18.97
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.793{col 37}  0.494{col 47}  1.272{col 58}  13.68
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.162{col 37}  0.819{col 47}  1.647{col 58}  25.05
{txt}London{col 22}{c |}{col 25} (Insufficient data)
Amsterdam{col 22}{c |}{col 25} (Insufficient data)
College Station, TX{col 22}{c |}{col 25} (Insufficient data)
{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.194{col 37}  1.003{col 47}  1.422{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  1.988{txt}  p = {res}0.047


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  10.89{col 39}  6{col 46}  0.092
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.347{col 36}  1.000{col 46}  2.006
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   44.9%{col 35}    0.0%{col 45}   75.2%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. gen subgroup=inlist(trialid, 1, 3, 10)          // those studies in which an interaction was not able to be estimated
{txt}
{com}. ipdmetan, study(trialid) by(subgroup) interaction eform keepall nograph : stcox trt##c.stage
{res}{error}Note: insufficient data in one or more subgroups

{txt}Studies included: {res}7
{txt}  plus {res}3{txt} studies with insufficient data
Participants included: {res}1187
{txt}  plus {res}Unknown{txt} participants with insufficient data

Meta-analysis pooling of interaction effect estimate{res} 1.trt#c.stage
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
subgroup and{col 22}{c |}  Interact.            
Trial name{col 22}{c |}   exp(b)   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
0{col 22}{c |}
Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.566{col 37}  0.954{col 47}  2.570{col 58}  12.45
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.389{col 37}  0.693{col 47}  2.785{col 58}   6.32
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.076{col 37}  1.295{col 47}  3.329{col 58}  13.70
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.987{col 37}  0.565{col 47}  1.724{col 58}   9.83
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.980{col 37}  0.656{col 47}  1.464{col 58}  18.97
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.793{col 37}  0.494{col 47}  1.272{col 58}  13.68
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.162{col 37}  0.819{col 47}  1.647{col 58}  25.05
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.194{col 37}  1.003{col 47}  1.422{col 58} 100.00
{txt}{hline 21}{c +}{hline 46}
1{col 22}{c |}{col 25} (No subgroup data)
London{col 22}{c |}{col 25} (Insufficient data)
Amsterdam{col 22}{c |}{col 25} (Insufficient data)
College Station, TX{col 22}{c |}{col 25} (Insufficient data)
{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 25} (Insufficient data)
{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.194{col 37}  1.003{col 47}  1.422{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
0   {res}{col 22}z{txt} = {res}  1.988{txt}{col 35}p = {res}0.047
{txt}1   {col 22}(Insufficient data)
Overall{col 22}{res}{col 22}z{txt} = {res}  1.988{txt}{col 35}p = {res}0.047


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
0{col 22}{c |}{col 26}{res}  10.89{col 39}  6{col 46}  0.092{col 59}44.9%
{txt}1{col 22}{c |}{col 26}(Insufficient data)
Overall{col 22}{c |}{col 26}{res}  10.89{col 39}  6{col 46}  0.092{col 59}44.9%
{txt}Between{col 22}{c |}{col 26}{res}      .{col 39}  0{col 46}      .
{txt}Between:Within (F){col 22}{c |}{col 26}{res}      .{col 35}  0{txt},{res}  6{col 46}      .
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}44.9%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{com}. cap nois ipdmetan, study(trialid) interaction eform keepall nograph poolvar(1.trt#c.stage) : stcox trt##c.stage if subgroup==1
{res}{err}an error occurred when {bf:ipdmetan} executed {bf:stcox}
Error in {bf:ipdmetan.CommandLoop}
{txt}
{com}. // latter should give error ("error when executing stcox" -- because no observations)
. 
. * graphics
. ipdmetan, study(trialid) hr lcols((e(N_fail)) "N failures") rcols((e(cmd)) "Command") forestplot(usestrict) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr2"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr2} saved as .gph format

{com}. cap nois ipdmetan, study(trialid) hr lcols((e(N_fail)) "N failures") nototal poolvar(trt) forestplot(usestrict) : stcox trt             // should give error (e() with nototal)
{res}{err}Cannot collect returned statistics with {bf:nototal}
Error in {bf:ipdmetan.CommandLoop}
{txt}
{com}. ipdmetan, study(trialid) hr lcols((e(N_fail)) "N failures") rcols(age %5.2f "Mean age") forestplot(usestrict) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr3"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr3} saved as .gph format

{com}. 
. * numeric vars with value labels must be decoded before being used with lcols! (this is a feature, not a bug)
. decode region, gen(regionstr)
{txt}
{com}. ipdmetan, study(trialid) hr lcols(region) forestplot(usestrict) : stcox trt             // value label not used; spurious "overall" statistic calculated (correctly!)
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr4"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr4} saved as .gph format

{com}. ipdmetan, study(trialid) hr lcols(regionstr) forestplot(usestrict ) : stcox trt         // works; no need for het info to be on new line (correct)
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}1{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr5"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr5} saved as .gph format

{com}. 
. * use of plotid and plot`i'opts
. ipdmetan, study(trialid) hr by(region) plotid(region) forestplot(usestrict box1opt(mcolor(red))) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.572{col 37}  1.302{col 47}  1.898{col 58}  41.57
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.899{col 37}  0.767{col 47}  1.054{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.710{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.40{col 39}  4{col 46}  0.171{col 59}37.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.75{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  13.19{col 35}  1{txt},{res}  8{col 46}  0.007
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}37.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{res}{txt}
{com}. graph save "$Graphs/ipdm_gr6"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr6} saved as .gph format

{com}. ipdmetan, study(trialid) hr by(region) plotid(trialid) forestplot(usestrict box3opt(mcolor(green))) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Region and{col 22}{c |}    Haz.               
Trial name{col 22}{c |}    ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
Europe{col 22}{c |}
London{res}{txt}{col 22}{c |}{col 26}{res}  1.466{col 37}  1.015{col 47}  2.117{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  1.170{col 37}  0.779{col 47}  1.758{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  1.727{col 37}  1.103{col 47}  2.704{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  1.297{col 37}  0.748{col 47}  2.250{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  2.299{col 37}  1.553{col 47}  3.404{col 58}   9.58
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  1.572{col 37}  1.302{col 47}  1.898{col 58}  41.57
{txt}{hline 21}{c +}{hline 46}
North America{col 22}{c |}
New York{res}{txt}{col 22}{c |}{col 26}{res}  0.761{col 37}  0.479{col 47}  1.208{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res}  0.771{col 37}  0.557{col 47}  1.068{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.086{col 37}  0.729{col 47}  1.619{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  1.096{col 37}  0.830{col 47}  1.447{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res}  0.706{col 37}  0.474{col 47}  1.053{col 58}   9.27
{txt}{col 22}{c |}
Subgroup, IV{col 22}{c |}{col 26}{res}  0.899{col 37}  0.767{col 47}  1.054{col 58}  58.43
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  1.135{col 37}  1.005{col 47}  1.281{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Tests of subgroup effect size = {res}1{txt}:
Europe   {res}{col 22}z{txt} = {res}  4.710{txt}{col 35}p = {res}0.000
{txt}North America   {res}{col 22}z{txt} = {res} -1.308{txt}{col 35}p = {res}0.191
{txt}Overall{col 22}{res}{col 22}z{txt} = {res}  2.038{txt}{col 35}p = {res}0.042


{txt}Cochran's Q statistics for heterogeneity
(other heterogeneity measures are stored in matrices {res}{bf:{stata mat list r(ovstats):r(ovstats)}}{txt} and {res}{bf:{stata mat list r(bystats):r(bystats)}}{txt})
{hline 21}{c TT}{hline 44}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value{col 61}I{c 178}
{hline 21}{c +}{hline 44}
Europe{col 22}{c |}{col 26}{res}   6.40{col 39}  4{col 46}  0.171{col 59}37.5%
{txt}North America{col 22}{c |}{col 26}{res}   5.57{col 39}  4{col 46}  0.233{col 59}28.3%
{txt}Overall{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000{col 59}71.6%
{txt}Between{col 22}{c |}{col 26}{res}  19.75{col 39}  1{col 46}  0.000
{txt}Between:Within (F){col 22}{c |}{col 26}{res}  13.19{col 35}  1{txt},{res}  8{col 46}  0.007
{txt}{hline 21}{c BT}{hline 44}
Note: Some heterogeneity observed (I{c 178} up to {res}37.5%{txt}) in one or more subgroups;
  tests for heterogeneity between subgroups may not be valid

{res}{txt}
{com}. graph save "$Graphs/ipdm_gr7"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr7} saved as .gph format

{com}. 
. * appending two datasets before calling forestplot
. tempfile testfp1 testfp2
{txt}
{com}. qui ipdmetan, study(trialid) saving(`testfp1') nograph : stcox trt if region==1
{txt}
{com}. qui ipdmetan, study(trialid) saving(`testfp2') nograph : stcox trt if region==2
{txt}
{com}. preserve
{txt}
{com}.         use `testfp1', clear
{txt}(Results set created by ipdmetan)

{com}.         set obs `=_N+1'
{txt}{p}
Number of observations ({bf:_N}) was 6,
now 7.
{p_end}

{com}.         replace _USE=4 if missing(_USE)
{txt}(1 real change made)

{com}.         append using `testfp2', gen(subgp)
{res}{txt}{p 0 7 2}
(variable
{bf:_EFFECT} was {bf:str18}, now {bf:str19} to accommodate using data's values)
{p_end}
(label {bf:{txt}_STUDY} already defined)

{com}.         forestplot, usestrict hr plotid(subgp) box1opt(mcolor(red)) box2opt(mcolor(green))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr8"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr8} saved as .gph format

{com}. restore
{txt}
{com}.         
. * use of "stacklabel" option
. clonevar trialid2=trialid
{txt}
{com}. label var trialid2 "Europe"
{txt}
{com}. qui ipdmetan, study(trialid2) saving(`testfp1', stack replace) nograph : stcox trt if region==1
{txt}
{com}. label var trialid2 "North America"
{txt}
{com}. qui ipdmetan, study(trialid2) saving(`testfp2', stack replace) nograph : stcox trt if region==2
{txt}
{com}. drop trialid2
{txt}
{com}. preserve
{txt}
{com}.         use `testfp1', clear
{txt}(Results set created by ipdmetan)

{com}.         set obs `=_N+1'
{txt}{p}
Number of observations ({bf:_N}) was 7,
now 8.
{p_end}

{com}.         replace _USE=4 if missing(_USE)
{txt}(1 real change made)

{com}.         append using `testfp2', gen(subgp)
{res}{txt}{p 0 7 2}
(variable
{bf:_EFFECT} was {bf:str18}, now {bf:str19} to accommodate using data's values)
{p_end}
(label {bf:{txt}_STUDY} already defined)

{com}.         label var _LABELS "Study"
{txt}
{com}.         forestplot, usestrict plotid(subgp) box1opt(mcolor(red)) box2opt(mcolor(green))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr9"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr9} saved as .gph format

{com}. restore
{txt}
{com}. // "stacklabel" is necessary, as "append" does not preserve variable labels in the "new" dataset
. // (that is, the dataset being appended to the existing one).
. 
. * Two datasets, four subgroup estimates; use of plotid
. tempfile testfp_all
{txt}
{com}. qui ipdmetan, study(trialid) by(region) saving(`testfp_all') nograph : stcox trt
{txt}
{com}. preserve
{txt}
{com}.         use `testfp_all', clear
{txt}(Results set created by ipdmetan)

{com}.         set obs `=_N+1'
{txt}{p}
Number of observations ({bf:_N}) was 18,
now 19.
{p_end}

{com}.         replace _USE = 4 in `=_N'                               // is it best to have user do this, or forestplot do it automatically?  If the latter, how?
{txt}(1 real change made)

{com}.         append using `testfp_all', gen(plotid)  // append two-subgroup dataset to itself
{res}{txt}(label {bf:{txt}_STUDY} already defined)
(label {bf:{txt}_BY} already defined)

{com}.         replace _ES = -_ES if inlist(plotid, 1, 4)                      // reverse direction of effects in the repeated data to form four subgroups
{txt}(13 real changes made)

{com}.         gen newLCI = -_UCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         gen newUCI = -_LCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         replace _LCI = newLCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         replace _UCI = newUCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         forestplot, usestrict hr nooverall plotid(plotid) box1opt(mcolor(red)) box2opt(mcolor(green))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr10"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr10} saved as .gph format

{com}.         forestplot, usestrict hr nooverall plotid(plotid) box1opt(mcolor(red)) box2opt(mcolor(green)) noadjust  // correct for diamond/text overlap
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr11"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr11} saved as .gph format

{com}. restore
{txt}
{com}. // no gap between heterogeneity line in first plot and trial data in second plot!!
. 
. * Two datasets, both with subgroup and overall pooled estimates
. preserve
{txt}
{com}.         use `testfp_all', clear
{txt}(Results set created by ipdmetan)

{com}.         set obs `=_N+1'
{txt}{p}
Number of observations ({bf:_N}) was 18,
now 19.
{p_end}

{com}.         replace _USE = 4 in `=_N'                                       // is it best to have user do this, or forestplot do it automatically?  If the latter, how?
{txt}(1 real change made)

{com}.         append using `testfp_all', gen(plotid)
{res}{txt}(label {bf:{txt}_STUDY} already defined)
(label {bf:{txt}_BY} already defined)

{com}.         replace _ES = -_ES if inlist(plotid, 1, 4)                      // reverse direction of effects in the repeated data to form four subgroups
{txt}(13 real changes made)

{com}.         gen newLCI = -_UCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         gen newUCI = -_LCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         replace _LCI = newLCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         replace _UCI = newUCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         forestplot, usestrict plotid(plotid) box1opt(mcolor(red)) box2opt(mcolor(green)) diam1opt(lcolor(red)) diam2opt(lcolor(green)) noadjust
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr12"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr12} saved as .gph format

{com}. restore
{txt}
{com}. 
. * Look at overall pooled estimates
. preserve
{txt}
{com}.         use `testfp_all', clear
{txt}(Results set created by ipdmetan)

{com}.         set obs `=_N+1'
{txt}{p}
Number of observations ({bf:_N}) was 18,
now 19.
{p_end}

{com}.         replace _USE = 4 in `=_N'                       // is it best to have user do this, or forestplot do it automatically?  If the latter, how?
{txt}(1 real change made)

{com}.         append using `testfp_all', gen(plotid)
{res}{txt}(label {bf:{txt}_STUDY} already defined)
(label {bf:{txt}_BY} already defined)

{com}.         replace _ES = -_ES if inlist(plotid, 1, 4)                      // reverse direction of effects in the repeated data to form four subgroups
{txt}(13 real changes made)

{com}.         gen newLCI = -_UCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         gen newUCI = -_LCI if inlist(plotid, 1, 4)
{txt}(24 missing values generated)

{com}.         replace _LCI = newLCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         replace _UCI = newUCI if inlist(plotid, 1, 4)
{txt}(13 real changes made)

{com}.         
.         * Options affecting subtotals (_USE==3) but not overall totals (_USE==5):
.         replace plotid=3 if plotid==0 & _USE==5
{txt}(1 real change made)

{com}.         replace plotid=4 if plotid==1 & _USE==5
{txt}(1 real change made)

{com}.         forestplot, usestrict plotid(plotid) box1opt(mcolor(red)) box3opt(mcolor(green)) diam1opt(lcolor(red)) diam3opt(lcolor(green))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr13"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr13} saved as .gph format

{com}.         
.         * Test whether `p'opts really do overwrite global opts
.         forestplot, usestrict plotid(plotid) boxopt(mcolor(green)) diamopt(lpattern(dash)) box1opt(mcolor(red))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr14"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr14} saved as .gph format

{com}.         forestplot, usestrict plotid(plotid) diam1opt(lcolor(red)) diam2opt(lcolor(blue)) diam3opt(lcolor(green)) diam4opt(lcolor(yellow))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr15"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr15} saved as .gph format

{com}.         forestplot, usestrict plotid(plotid) oline1opt(lcolor(red)) oline2opt(lcolor(blue)) oline3opt(lcolor(green)) oline4opt(lcolor(yellow)) 
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr16"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr16} saved as .gph format

{com}. 
.         * rcap option
.         forestplot, usestrict plotid(plotid) ci1opt(rcap msize(huge))
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{txt}
{com}.         graph save "$Graphs/ipdm_gr17"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr17} saved as .gph format

{com}. 
.         * plots that (correctly) give errors
.         cap nois forestplot, plotid(plotid) boxopt(mcolor(blue)) box1opt(mcolor(red)) box1opt(mcolor(green))    // correctly gives error (repeated option)
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{txt}Note: option {bf:wgt(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_WT}
{txt}Note: option {bf:labels(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_LABELS}

{err}option {bf:box1opts} supplied multiple times; should only be supplied once
Error in {bf:forestplot.BuildPlotCmds}
{txt}
{com}.         cap nois forestplot if plotid==2, plotid(plotid) ciopt(rcap msize(huge))                                                                // correctly gives error (no observations)
{txt}Note: no {it:varlist} specified; using default {it:varlist}{res} {bf:_ES _LCI _UCI}
{txt}Note: option {bf:use(}{it:varname}{bf:)} not specified; using default {it:varname}{res} {bf:_USE}
{err}no observations
{txt}
{com}.         
. restore
{txt}
{com}. 
. * rcap/rcapsym
. ipdmetan, study(trialid) forestplot(usestrict ciopt(rcap)) : stcox trt
{res}
{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
Trial name{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.383{col 37}  0.015{col 47}  0.750{col 58}  10.90
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.157{col 37} -0.250{col 47}  0.564{col 58}   8.90
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.546{col 37}  0.098{col 47}  0.995{col 58}   7.33
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.260{col 37} -0.290{col 47}  0.811{col 58}   4.86
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.833{col 37}  0.440{col 47}  1.225{col 58}   9.58
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.273{col 37} -0.735{col 47}  0.189{col 58}   6.91
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.260{col 37} -0.586{col 47}  0.066{col 58}  13.87
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.083{col 37} -0.316{col 47}  0.482{col 58}   9.27
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.092{col 37} -0.186{col 47}  0.369{col 58}  19.12
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.348{col 37} -0.746{col 47}  0.051{col 58}   9.27
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.126{col 37}  0.005{col 47}  0.248{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  2.038{txt}  p = {res}0.042


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  31.73{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.878{col 36}  1.253{col 46}  2.466
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   71.6%{col 35}   36.3%{col 45}   83.6%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr18"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr18} saved as .gph format

{com}. 
. 
. 
. *** Extra stuff November 2016
. 
. // First, create AD file containg both lnHR + SE + CI *and* OE & V
. qui ipdmetan trt, study(trialid) by(region) logrank strata(sex) nograph nooverall saving(`testAD', replace) 
{txt}
{com}. preserve
{txt}
{com}.         use `testAD', clear
{txt}(Results set created by ipdmetan)

{com}.         keep if inlist(_USE, 1, 2)
{txt}(7 observations deleted)

{com}.         drop _USE _LABELS _WT
{txt}
{com}.         rename (_STUDY _BY _ES _seES _LCI _UCI _NN) (trialid region loghr seloghr loglci loguci npts)
{res}{txt}
{com}.         gen double V = 1/seloghr^2
{txt}
{com}.         gen double OE = V * loghr
{txt}
{com}.         save, replace
{txt}{p 0 4 2}
file {bf}
C:\Users\rmjldfi\AppData\Local\Temp\ST_2c88_000001.tmp{rm}
saved
as .dta format
{p_end}

{com}. restore
{txt}
{com}. 
. // Now test for AD-IPD conflicts when "raw data" is used (particularly HR vs O-E/V)
. ipdmetan trt if region==1, study(trialid) logrank strata(sex) nograph ad(`testAD' if region==2, vars(loghr seloghr) npts(npts))

{col 9}{txt}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens
{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}
{error}     (that is, in addition to the {bf:logrank} main option to {bf:ipdmetan})

{txt}Studies included from IPD: {res}5
{txt}Participants included from IPD: {res}656

{txt}Studies included from aggregate data: {res}5
{txt}Participants included from aggregate data: {res}986

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}  11.19
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   8.86
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   6.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   4.68
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   9.00
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   7.14
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}  14.30
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   9.52
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}  19.64
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   9.21
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.118{col 37} -0.007{col 47}  0.243{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  3.45{txt} on {res}1{txt} df,  p = {res}0.063


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  32.34{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.896{col 36}  1.270{col 46}  2.485
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   72.2%{col 35}   38.0%{col 45}   83.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan, study(trialid) nograph ad(`testAD', vars(OE V) npts(npts) relabel logrank) log : stcox trt, strata(sex)
{res}
{error}Note: Effects assumed to represent log Hazard Ratios, due to {bf:logrank} suboption in {bf:ad()}
{error}Note: Aggregate data variables assumed to represent {it:O-E} and {it:V} due to {bf:logrank} suboption in {bf:ad()}

{txt}Studies included from IPD: {res}10
{txt}Participants included from IPD: {res}1642

{txt}Studies included from aggregate data: {res}10
{txt}Participants included from aggregate data: {res}1642

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} trt
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.389{col 37}  0.015{col 47}  0.762{col 58}   5.52
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.180{col 37} -0.237{col 47}  0.597{col 58}   4.43
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.555{col 37}  0.077{col 47}  1.033{col 58}   3.37
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.365{col 37} -0.204{col 47}  0.933{col 58}   2.38
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.807{col 37}  0.406{col 47}  1.209{col 58}   4.78
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.301{col 37} -0.765{col 47}  0.162{col 58}   3.58
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.256{col 37} -0.583{col 47}  0.071{col 58}   7.21
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.347{col 47}  0.460{col 58}   4.73
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.079{col 37} -0.203{col 47}  0.361{col 58}   9.69
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.372{col 37} -0.775{col 47}  0.030{col 58}   4.76
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   5.54
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   4.39
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   3.20
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   2.32
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   4.46
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   3.54
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   7.08
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   4.72
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   9.73
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   4.56
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.117{col 37}  0.030{col 47}  0.205{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res}  2.619{txt}  p = {res}0.009


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}  63.73{col 39} 19{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.831{col 36}  1.408{col 46}  2.238
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   70.2%{col 35}   49.5%{col 45}   80.0%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan trt, logrank strata(sex) study(trialid) nograph ad(`testAD', vars(loghr seloghr) npts(npts) relabel) log

{col 9}{txt}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens
{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}
{error}     (that is, in addition to the {bf:logrank} main option to {bf:ipdmetan})

{txt}Studies included from IPD: {res}10
{txt}Participants included from IPD: {res}1642

{txt}Studies included from aggregate data: {res}10
{txt}Participants included from aggregate data: {res}1642

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   5.59
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   4.43
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   3.23
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   2.34
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   4.50
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   3.57
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   7.15
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   4.76
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   9.82
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   4.60
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   5.59
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   4.43
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   3.23
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   2.34
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   4.50
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   3.57
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   7.15
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   4.76
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   9.82
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   4.60
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.118{col 37}  0.030{col 47}  0.206{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  6.90{txt} on {res}1{txt} df,  p = {res}0.009


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  64.68{col 39} 19{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.845{col 36}  1.421{col 46}  2.252
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   70.6%{col 35}   50.5%{col 45}   80.3%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan trt, logrank strata(sex) study(trialid) nograph ad(`testAD', vars(OE V) npts(npts) relabel) log

{col 9}{txt}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens
{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}
{error}     (that is, in addition to the {bf:logrank} main option to {bf:ipdmetan})

{txt}Studies included from IPD: {res}10
{txt}Participants included from IPD: {res}1642

{txt}Studies included from aggregate data: {res}10
{txt}Participants included from aggregate data: {res}1642

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}  11.18
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   8.86
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   6.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   4.68
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   9.00
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   7.14
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}  14.30
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   9.52
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}  19.64
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   9.21
{txt}London{res}{txt}{col 22}{c |}{col 26}{res} 10.773{col 37}-43.373{col 47} 64.919{col 58}   0.00
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  3.957{col 37}-38.950{col 47} 46.865{col 58}   0.00
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  9.196{col 37}-22.069{col 47} 40.461{col 58}   0.00
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  4.297{col 37}-18.377{col 47} 26.970{col 58}   0.00
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res} 19.030{col 37}-24.559{col 47} 62.619{col 58}   0.00
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -5.369{col 37}-39.924{col 47} 29.186{col 58}   0.00
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -9.141{col 37}-78.356{col 47} 60.075{col 58}   0.00
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  1.328{col 37}-44.748{col 47} 47.404{col 58}   0.00
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  3.807{col 37}-91.281{col 47} 98.895{col 58}   0.00
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -8.686{col 37}-53.259{col 47} 35.887{col 58}   0.00
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.119{col 37} -0.006{col 47}  0.243{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  3.47{txt} on {res}1{txt} df,  p = {res}0.062


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  34.02{col 39} 19{col 46}  0.018
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.338{col 36}  1.000{col 46}  1.713
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   44.2%{col 35}    0.0%{col 45}   65.9%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan trt, logrank strata(sex) study(trialid) nograph ad(`testAD', vars(OE V) npts(npts) relabel logrank) log

{col 9}{txt}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Studies included from IPD: {res}10
{txt}Participants included from IPD: {res}1642

{txt}Studies included from aggregate data: {res}10
{txt}Participants included from aggregate data: {res}1642

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   5.59
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   4.43
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   3.23
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   2.34
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   4.50
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   3.57
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   7.15
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   4.76
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   9.82
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   4.60
{txt}London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   5.59
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   4.43
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   3.23
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   2.34
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   4.50
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   3.57
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   7.15
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   4.76
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   9.82
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   4.60
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.118{col 37}  0.030{col 47}  0.206{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  6.90{txt} on {res}1{txt} df,  p = {res}0.009


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  64.68{col 39} 19{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.845{col 36}  1.421{col 46}  2.252
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   70.6%{col 35}   50.5%{col 45}   80.3%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. ipdmetan trt, logrank strata(sex) study(trialid) nograph log

{col 9}{txt}Failure {bf:_d}: {res}fail
{col 3}{txt}Analysis time {bf:_t}: {res}tcens

{txt}Studies included: {res}10
{txt}Participants included: {res}1642

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Trial name{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
London{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}  11.19
{txt}Paris{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   8.86
{txt}Amsterdam{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   6.46
{txt}Stockholm{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   4.68
{txt}Madrid{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   9.00
{txt}New York{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   7.14
{txt}Chicago{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}  14.30
{txt}Los Angeles{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   9.52
{txt}Toronto{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}  19.64
{txt}College Station, TX{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   9.21
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.118{col 37} -0.007{col 47}  0.243{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  3.45{txt} on {res}1{txt} df,  p = {res}0.063


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  32.34{col 39}  9{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.896{col 36}  1.270{col 46}  2.485
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   72.2%{col 35}   38.0%{col 45}   83.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. // 10th August 2018: "incompatible" scenario to check for error message
. cap nois ipdmetan tcens trt, study(trialid) nograph ad(`testAD', vars(OE V) npts(npts) relabel logrank) log
{err}Must specify an outcome measure (summary statistic) if no estimation command
{txt}
{com}. 
. 
. // "AD+AD" example
. use "$Datasets/metan_example_data", clear
{txt}(Example dataset for meta-analyses, Ross Harris 2006)

{com}. qui metan tdeath tnodeath cdeath cnodeath, nogr
{txt}
{com}. rename (_ES _seES) (eff se_eff)
{res}{txt}
{com}. label var eff
{txt}
{com}. label var se_eff
{txt}
{com}. drop _*
{txt}
{com}. 
. gen v = 1 / se_eff^2
{txt}
{com}. gen oe = v * eff
{txt}
{com}. ipdmetan oe v, logrank ad(`testAD', vars(loghr seloghr)) study(id) norsample nograph
{error}Note: variable {bf:id} (in option {bf:study()}) not found in aggregate dataset;
{error}      all valid observations in the aggregate dataset will be included
{error}Note: Aggregate data variables assumed to represent {it:logHR} and {it:selogHR}
{error}      If in fact they should represent {it:O-E} and {it:V}, please supply the {bf:logrank} suboption to {bf:ad()}
{error}     (that is, in addition to the {bf:logrank} main option to {bf:ipdmetan})

{txt}Studies included from IPD: {res}20
{txt}Participants included from IPD: {res}Unknown

{txt}Studies included from aggregate data: {res}10
{txt}Participants included from aggregate data: {res}Unknown

{txt}Meta-analysis pooling of{res} Peto (logrank) log Hazard Ratios

{txt}{hline 21}{c TT}{hline 46}
{col 22}{c |}  log Haz.             
Study identifier{col 22}{c |}    Ratio   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
AHS 60-80{res}{txt}{col 22}{c |}{col 26}{res} -0.238{col 37} -0.497{col 47}  0.022{col 58}   5.48
{txt}Ohno{res}{txt}{col 22}{c |}{col 26}{res}  0.110{col 37} -0.130{col 47}  0.350{col 58}   6.41
{txt}CA,USA 81-85{res}{txt}{col 22}{c |}{col 26}{res}  0.057{col 37} -0.350{col 47}  0.464{col 58}   2.23
{txt}Walker{res}{txt}{col 22}{c |}{col 26}{res}  0.068{col 37} -0.246{col 47}  0.383{col 58}   3.73
{txt}Ghadirian{res}{txt}{col 22}{c |}{col 26}{res}  0.154{col 37} -0.236{col 47}  0.544{col 58}   2.42
{txt}Ewings{res}{txt}{col 22}{c |}{col 26}{res}  0.079{col 37} -0.130{col 47}  0.288{col 58}   8.43
{txt}Hayes{res}{txt}{col 22}{c |}{col 26}{res}  0.407{col 37}  0.048{col 47}  0.767{col 58}   2.85
{txt}SWE 71-75{res}{txt}{col 22}{c |}{col 26}{res} -0.080{col 37} -0.867{col 47}  0.707{col 58}   0.60
{txt}Hartman{res}{txt}{col 22}{c |}{col 26}{res} -0.218{col 37} -0.524{col 47}  0.088{col 58}   3.94
{txt}AHS{res}{txt}{col 22}{c |}{col 26}{res} -0.284{col 37} -0.499{col 47} -0.070{col 58}   7.99
{txt}Lee{res}{txt}{col 22}{c |}{col 26}{res}  0.182{col 37} -0.399{col 47}  0.764{col 58}   1.09
{txt}Hsieh{res}{txt}{col 22}{c |}{col 26}{res}  0.432{col 37}  0.082{col 47}  0.782{col 58}   3.01
{txt}ATBC{res}{txt}{col 22}{c |}{col 26}{res}  0.070{col 37} -0.388{col 47}  0.528{col 58}   1.76
{txt}CARET{res}{txt}{col 22}{c |}{col 26}{res}  0.105{col 37} -0.146{col 47}  0.356{col 58}   5.86
{txt}Lifespan study{res}{txt}{col 22}{c |}{col 26}{res} -0.169{col 37} -0.444{col 47}  0.107{col 58}   4.85
{txt}Joseph{res}{txt}{col 22}{c |}{col 26}{res}  0.224{col 37} -0.236{col 47}  0.683{col 58}   1.74
{txt}Friedenreich{res}{txt}{col 22}{c |}{col 26}{res}  0.076{col 37} -0.157{col 47}  0.310{col 58}   6.77
{txt}Allen{res}{txt}{col 22}{c |}{col 26}{res}  0.392{col 37} -0.041{col 47}  0.825{col 58}   1.97
{txt}Weinstein{res}{txt}{col 22}{c |}{col 26}{res}  0.091{col 37} -0.244{col 47}  0.426{col 58}   3.29
{txt}King{res}{txt}{col 22}{c |}{col 26}{res}  0.091{col 37} -0.352{col 47}  0.534{col 58}   1.88
{txt}21{res}{txt}{col 22}{c |}{col 26}{res}  0.390{col 37}  0.017{col 47}  0.763{col 58}   2.65
{txt}22{res}{txt}{col 22}{c |}{col 26}{res}  0.181{col 37} -0.238{col 47}  0.600{col 58}   2.10
{txt}23{res}{txt}{col 22}{c |}{col 26}{res}  0.576{col 37}  0.086{col 47}  1.067{col 58}   1.53
{txt}24{res}{txt}{col 22}{c |}{col 26}{res}  0.371{col 37} -0.205{col 47}  0.948{col 58}   1.11
{txt}25{res}{txt}{col 22}{c |}{col 26}{res}  0.856{col 37}  0.440{col 47}  1.271{col 58}   2.14
{txt}26{res}{txt}{col 22}{c |}{col 26}{res} -0.305{col 37} -0.771{col 47}  0.162{col 58}   1.69
{txt}27{res}{txt}{col 22}{c |}{col 26}{res} -0.259{col 37} -0.589{col 47}  0.071{col 58}   3.39
{txt}28{res}{txt}{col 22}{c |}{col 26}{res}  0.056{col 37} -0.348{col 47}  0.461{col 58}   2.26
{txt}29{res}{txt}{col 22}{c |}{col 26}{res}  0.078{col 37} -0.203{col 47}  0.360{col 58}   4.66
{txt}30{res}{txt}{col 22}{c |}{col 26}{res} -0.382{col 37} -0.793{col 47}  0.029{col 58}   2.18
{txt}{hline 21}{c +}{hline 46}
Overall, Peto{col 22}{c |}{col 26}{res}  0.052{col 37} -0.009{col 47}  0.113{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}chi{c 178}{txt} = {res}  2.79{txt} on {res}1{txt} df,  p = {res}0.095


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Peto Q{col 22}{c |}{col 26}{res}  65.44{col 39} 29{col 46}  0.000
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.502{col 36}  1.177{col 46}  1.818
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   55.7%{col 35}   27.8%{col 45}   69.8%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Peto Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. 
. 
. *** Extra stuff June 2020
. use "$Datasets/ipdmetan_example.dta", clear
{txt}
{com}. stset tcens, fail(fail)

{txt}Survival-time data settings

{col 10}Failure event: {res}fail!=0 & fail<.
{col 1}{txt}Observed time interval: {res}(0, tcens]
{col 6}{txt}Exit on or before: {res}failure

{txt}{hline 74}
{res}      1,642{txt}  total observations
{res}          0{txt}  exclusions
{hline 74}
{res}      1,642{txt}  observations remaining, representing
{res}      1,082{txt}  failures in single-record/single-failure data
{res}  1,025.389{txt}  total analysis time at risk and under observation
                                                At risk from t = {res}        0
                                     {txt}Earliest observed entry t = {res}        0
                                          {txt}Last observed exit t = {res} 5.811862
{txt}
{com}. 
. // Test "influence" forestplot options
. qui ipdmetan tcens trt, study(trialid) by(region) influence smd
{txt}
{com}. graph save "$Graphs/ipdm_gr19"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr19} saved as .gph format

{com}. qui ipdmetan tcens trt, study(trialid) by(region) influence smd ///
>         forestplot(ocilineopts(color(gs8)))
{txt}
{com}. graph save "$Graphs/ipdm_gr20"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr20} saved as .gph format

{com}. cap nois ipdmetan tcens trt, study(trialid) by(region) influence smd re rfdist ///
>         forestplot(ocilineopts(color(gs8)) rfcilineopts(color(gs12)))
{err}Options {bf:influence} and {bf:rfdist} are not compatible
Error in {bf:metan.ProcessModelOpts}
{txt}
{com}. qui ipdmetan tcens trt, study(trialid) by(region) smd re rfdist ///
>         forestplot(ocilineopts(color(gs8)) rfcilineopts(color(gs12)))
{txt}
{com}. graph save "$Graphs/ipdm_gr21"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr21} saved as .gph format

{com}. qui ipdmetan tcens trt, study(trialid) by(region) smd re rfdist ///
>         forestplot(ocilineopts(color(gs8)) rfcilineopts(color(gs12) hide))
{txt}
{com}. graph save "$Graphs/ipdm_gr22"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr22} saved as .gph format

{com}. 
. // "influence" with single-study subgroup
. clonevar region2 = region
{txt}
{com}. replace region2 = 3 if trialid==1
{txt}(176 real changes made)

{com}. qui ipdmetan tcens trt, study(trialid) by(region2) influence smd sgwt
{txt}
{com}. graph save "$Graphs/ipdm_gr23"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr23} saved as .gph format

{com}. 
. 
. 
. 
. *****************************************************
. 
. * ipdover
. sysuse auto, clear
{txt}(1978 automobile data)

{com}. ipdover, over(foreign rep78) forest(nonull xlabel(10(5)40, force)) : mean mpg
{res}
{txt}Participants included: {res}74{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} mpg

{txt}{hline 25}{c TT}{hline 45}
Subgroup{col 26}{c |}   Effect  {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
{col 26}{c |}
Car origin{col 26}{c |}
Domestic{col 26}{c |}{col 29}{res} 19.827{col 40} 18.538{col 50} 21.116{col 61}     52
{txt}Foreign{col 26}{c |}{col 29}{res} 24.773{col 40} 22.010{col 50} 27.535{col 61}     22
{txt}{col 26}{c |}
Repair record 1978{col 26}{c |}
1{col 26}{c |}{col 29}{res} 21.000{col 40} 15.120{col 50} 26.880{col 61}      2
{txt}2{col 26}{c |}{col 29}{res} 19.125{col 40} 16.521{col 50} 21.729{col 61}      8
{txt}3{col 26}{c |}{col 29}{res} 19.433{col 40} 17.951{col 50} 20.915{col 61}     30
{txt}4{col 26}{c |}{col 29}{res} 21.667{col 40} 19.387{col 50} 23.946{col 61}     18
{txt}5{col 26}{c |}{col 29}{res} 27.364{col 40} 22.203{col 50} 32.524{col 61}     11
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res} 21.297{col 40} 19.979{col 50} 22.615{col 61}     74
{txt}{hline 25}{c BT}{hline 45}
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr24"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr24} saved as .gph format

{com}. 
. * use of plotid with ipdover
. ipdover, over(foreign rep78) forest(nonull xlabel(10(5)40, force) box1opt(mcolor(red)) ci2opt(lcolor(green)) diam3opt(lpattern(dash))) ///
>         plotid(_OVER, list) : mean mpg
{res}
{txt}Participants included: {res}74{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} mpg

{txt}{hline 25}{c TT}{hline 45}
Subgroup{col 26}{c |}   Effect  {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
{col 26}{c |}
Car origin{col 26}{c |}
Domestic{col 26}{c |}{col 29}{res} 19.827{col 40} 18.538{col 50} 21.116{col 61}     52
{txt}Foreign{col 26}{c |}{col 29}{res} 24.773{col 40} 22.010{col 50} 27.535{col 61}     22
{txt}{col 26}{c |}
Repair record 1978{col 26}{c |}
1{col 26}{c |}{col 29}{res} 21.000{col 40} 15.120{col 50} 26.880{col 61}      2
{txt}2{col 26}{c |}{col 29}{res} 19.125{col 40} 16.521{col 50} 21.729{col 61}      8
{txt}3{col 26}{c |}{col 29}{res} 19.433{col 40} 17.951{col 50} 20.915{col 61}     30
{txt}4{col 26}{c |}{col 29}{res} 21.667{col 40} 19.387{col 50} 23.946{col 61}     18
{txt}5{col 26}{c |}{col 29}{res} 27.364{col 40} 22.203{col 50} 32.524{col 61}     11
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res} 21.297{col 40} 19.979{col 50} 22.615{col 61}     74
{txt}{hline 25}{c BT}{hline 45}


plotid: observations marked by {res}_OVER{txt}:

-> plotid = {res}1{txt}:

  {c TLC}{hline 6}{c -}{hline 12}{c -}{hline 10}{c TRC}
  {c |} {res}_USE        _OVER   _LABELS  {txt}{c |}
  {c LT}{hline 6}{c -}{hline 12}{c -}{hline 10}{c RT}
  {c |} {res}   1   Car origin   Domestic {txt}{c |}
  {c |} {res}   1   Car origin   Foreign  {txt}{c |}
  {c BLC}{hline 6}{c -}{hline 12}{c -}{hline 10}{c BRC}

-> plotid = {res}2{txt}:

  {c TLC}{hline 6}{c -}{hline 20}{c -}{hline 9}{c TRC}
  {c |} {res}_USE                _OVER   _LABELS {txt}{c |}
  {c LT}{hline 6}{c -}{hline 20}{c -}{hline 9}{c RT}
  {c |} {res}   1   Repair record 1978   1       {txt}{c |}
  {c |} {res}   1   Repair record 1978   2       {txt}{c |}
  {c |} {res}   1   Repair record 1978   3       {txt}{c |}
  {c |} {res}   1   Repair record 1978   4       {txt}{c |}
  {c |} {res}   1   Repair record 1978   5       {txt}{c |}
  {c BLC}{hline 6}{c -}{hline 20}{c -}{hline 9}{c BRC}

-> plotid = {res}3{txt}:

  {c TLC}{hline 6}{c -}{hline 7}{c -}{hline 9}{c TRC}
  {c |} {res}_USE   _OVER   _LABELS {txt}{c |}
  {c LT}{hline 6}{c -}{hline 7}{c -}{hline 9}{c RT}
  {c |} {res}   5       .   Overall {txt}{c |}
  {c BLC}{hline 6}{c -}{hline 7}{c -}{hline 9}{c BRC}
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr25"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr25} saved as .gph format

{com}. 
. use "$Datasets/ipdmetan_example", clear
{txt}
{com}. stset tcens, fail(fail)

{txt}Survival-time data settings

{col 10}Failure event: {res}fail!=0 & fail<.
{col 1}{txt}Observed time interval: {res}(0, tcens]
{col 6}{txt}Exit on or before: {res}failure

{txt}{hline 74}
{res}      1,642{txt}  total observations
{res}          0{txt}  exclusions
{hline 74}
{res}      1,642{txt}  observations remaining, representing
{res}      1,082{txt}  failures in single-record/single-failure data
{res}  1,025.389{txt}  total analysis time at risk and under observation
                                                At risk from t = {res}        0
                                     {txt}Earliest observed entry t = {res}        0
                                          {txt}Last observed exit t = {res} 5.811862
{txt}
{com}. ipdover, over(stage) over(trialid) hr nosubgroup nooverall forestplot(usestrict favours(Favours treatment # Favours control) notruncate) : stcox trt
{res}
{txt}Participants included: {res}Unknown{txt} (overall estimation not run)

Trial subgroup analysis of main (treatment) effect estimate{res} trt

{txt}{hline 24}{c TT}{hline 45}
Trial name and Disease{col 25}{c |}    Haz.   
stage of patient{col 25}{c |}   ratio   {col 38}[95% Conf. Interval]{col 61}No. pts
{hline 24}{c +}{hline 45}
Paris{col 25}{c |}
I{col 25}{c |}{col 28}{res}  0.687{col 39}  0.361{col 49}  1.307{col 60}     59
{txt}II{col 25}{c |}{col 28}{res}  1.538{col 39}  0.738{col 49}  3.207{col 60}     43
{txt}III{col 25}{c |}{col 28}{res}  2.061{col 39}  0.878{col 49}  4.839{col 60}     39
{txt}{hline 24}{c +}{hline 45}
Stockholm{col 25}{c |}
I{col 25}{c |}{col 28}{res}  1.301{col 39}  0.510{col 49}  3.315{col 60}     24
{txt}II{col 25}{c |}{col 28}{res}  0.681{col 39}  0.261{col 49}  1.774{col 60}     23
{txt}III{col 25}{c |}{col 28}{res}  3.088{col 39}  0.985{col 49}  9.681{col 60}     22
{txt}{hline 24}{c +}{hline 45}
Madrid{col 25}{c |}
I{col 25}{c |}{col 28}{res}  1.574{col 39}  0.784{col 49}  3.161{col 60}     51
{txt}II{col 25}{c |}{col 28}{res}  1.805{col 39}  0.946{col 49}  3.442{col 60}     59
{txt}III{col 25}{c |}{col 28}{res}  4.272{col 39}  2.019{col 49}  9.039{col 60}     50
{txt}{hline 24}{c +}{hline 45}
New York{col 25}{c |}
I{col 25}{c |}{col 28}{res}  0.924{col 39}  0.423{col 49}  2.017{col 60}     41
{txt}II{col 25}{c |}{col 28}{res}  0.477{col 39}  0.197{col 49}  1.152{col 60}     33
{txt}III{col 25}{c |}{col 28}{res}  0.973{col 39}  0.435{col 49}  2.175{col 60}     41
{txt}{hline 24}{c +}{hline 45}
Chicago{col 25}{c |}
I{col 25}{c |}{col 28}{res}  0.706{col 39}  0.400{col 49}  1.248{col 60}     76
{txt}II{col 25}{c |}{col 28}{res}  0.880{col 39}  0.503{col 49}  1.538{col 60}     80
{txt}III{col 25}{c |}{col 28}{res}  0.672{col 39}  0.378{col 49}  1.194{col 60}     82
{txt}{hline 24}{c +}{hline 45}
Los Angeles{col 25}{c |}
I{col 25}{c |}{col 28}{res}  1.315{col 39}  0.623{col 49}  2.773{col 60}     43
{txt}II{col 25}{c |}{col 28}{res}  1.313{col 39}  0.697{col 49}  2.473{col 60}     55
{txt}III{col 25}{c |}{col 28}{res}  0.730{col 39}  0.344{col 49}  1.549{col 60}     50
{txt}{hline 24}{c +}{hline 45}
Toronto{col 25}{c |}
I{col 25}{c |}{col 28}{res}  1.224{col 39}  0.733{col 49}  2.042{col 60}    103
{txt}II{col 25}{c |}{col 28}{res}  0.763{col 39}  0.476{col 49}  1.224{col 60}    115
{txt}III{col 25}{c |}{col 28}{res}  1.502{col 39}  0.897{col 49}  2.514{col 60}     98
{txt}{hline 24}{c BT}{hline 45}
{res}{txt}
{com}. graph save "$Graphs/ipdm_gr26"
{res}{txt}file {bf:S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/Graphs_29Nov2021/ipdm_gr26} saved as .gph format

{com}. // N.B. "notruncate" needed because "study" names (i.e. I, II, III) are so much shorter than the title string
. 
. 
.         
. *****************************************************
. 
. * Examples Nov 2021 with prefix commands and complex estimation command structures
. 
. // use of weights (IPW weights in this instance, but doesn't really matter)
. webuse cattaneo2,clear
{txt}(Excerpt from Cattaneo (2010) Journal of Econometrics 155: 138154)

{com}. quietly logit mbsmoke mmarried mage medu
{txt}
{com}. predict pscore, pr
{txt}
{com}. gen ipw = mbsmoke/pscore + (1-mbsmoke)/(1-pscore)
{txt}
{com}. logistic lbweight mbsmoke [pweight=ipw]
{res}
{txt}{col 1}Logistic regression{col 57}{lalign 13:Number of obs}{col 70} = {res}{ralign 6:4,642}
{txt}{col 57}{lalign 13:Wald chi2({res:1})}{col 70} = {res}{ralign 6:27.98}
{txt}{col 57}{lalign 13:Prob > chi2}{col 70} = {res}{ralign 6:0.0000}
{txt}{col 1}{lalign 20:Log pseudolikelihood}{col 21} = {res}{ralign 10:-2455.4295}{txt}{col 57}{lalign 13:Pseudo R2}{col 70} = {res}{ralign 6:0.0180}

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 14}{c |}{col 26}    Robust
{col 1}    lbweight{col 14}{c |} Odds ratio{col 26}   std. err.{col 38}      z{col 46}   P>|z|{col 54}     [95% con{col 67}f. interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 5}mbsmoke {c |}{col 14}{res}{space 2} 2.137165{col 26}{space 2} .3068264{col 37}{space 1}    5.29{col 46}{space 3}0.000{col 54}{space 4} 1.612997{col 67}{space 3} 2.831669
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} .0548215{col 26}{space 2} .0042002{col 37}{space 1}  -37.90{col 46}{space 3}0.000{col 54}{space 4} .0471775{col 67}{space 3}  .063704
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{p 0 6 2}Note: {bf:_cons} estimates baseline odds{txt}.{p_end}

{com}. ipdover, over(mmarried) nograph : logistic lbweight mbsmoke                             // no weights
{res}
{txt}Participants included: {res}4642{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} lbweight:mbsmoke

{txt}{hline 25}{c TT}{hline 45}
1 if mother married{col 26}{c |}   Effect  {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
Not married{col 26}{c |}{col 29}{res}  0.323{col 40} -0.036{col 50}  0.683{col 61}   1394
{txt}Married{col 26}{c |}{col 29}{res}  1.088{col 40}  0.706{col 50}  1.471{col 61}   3248
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res}  0.875{col 40}  0.616{col 50}  1.135{col 61}   4642
{txt}{hline 25}{c BT}{hline 45}

{com}. ipdover, over(mmarried) nograph : logistic lbweight mbsmoke [pweight=ipw]       // IPW weights
{res}
{txt}Participants included: {res}4642{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} lbweight:mbsmoke

{txt}{hline 25}{c TT}{hline 45}
1 if mother married{col 26}{c |}   Effect  {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
Not married{col 26}{c |}{col 29}{res}  0.307{col 40} -0.057{col 50}  0.671{col 61}   1394
{txt}Married{col 26}{c |}{col 29}{res}  1.090{col 40}  0.702{col 50}  1.478{col 61}   3248
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res}  0.759{col 40}  0.478{col 50}  1.041{col 61}   4642
{txt}{hline 25}{c BT}{hline 45}

{com}. 
. // use of teffects (non-standard syntax)
. teffects ipw (lbweight) (mbsmoke mage medu) if mmarried==0

{res}{txt}Iteration 0:{space 3}EE criterion = {res: 9.846e-17}  
Iteration 1:{space 3}EE criterion = {res: 1.037e-32}  
{res}
{txt}Treatment-effects estimation{col 49}Number of obs {col 67}= {res}     1,394
{txt:Estimator}{col 16}:{res: inverse-probability weights}
{txt:Outcome model}{col 16}:{res: weighted mean}
{txt:Treatment model}{col 16}:{res: logit}
{txt}{hline 23}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 24}{c |}{col 36}    Robust
{col 1}              lbweight{col 24}{c |} Coefficient{col 36}  std. err.{col 48}      z{col 56}   P>|z|{col 64}     [95% con{col 77}f. interval]
{hline 23}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}ATE                    {txt}{c |}
{space 15}mbsmoke {c |}
(Smoker vs Nonsmoker)  {c |}{col 24}{res}{space 2} .0249911{col 36}{space 2} .0174033{col 47}{space 1}    1.44{col 56}{space 3}0.151{col 64}{space 4}-.0091187{col 77}{space 3}  .059101
{txt}{hline 23}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}POmean                 {txt}{c |}
{space 15}mbsmoke {c |}
{space 12}Nonsmoker  {c |}{col 24}{res}{space 2}  .089182{col 36}{space 2} .0092767{col 47}{space 1}    9.61{col 56}{space 3}0.000{col 64}{space 4} .0709999{col 77}{space 3} .1073641
{txt}{hline 23}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. teffects ipw (lbweight) (mbsmoke mage medu) if mmarried==1

{res}{txt}Iteration 0:{space 3}EE criterion = {res: 2.405e-20}  
Iteration 1:{space 3}EE criterion = {res: 2.593e-34}  
{res}
{txt}Treatment-effects estimation{col 49}Number of obs {col 67}= {res}     3,248
{txt:Estimator}{col 16}:{res: inverse-probability weights}
{txt:Outcome model}{col 16}:{res: weighted mean}
{txt:Treatment model}{col 16}:{res: logit}
{txt}{hline 23}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 24}{c |}{col 36}    Robust
{col 1}              lbweight{col 24}{c |} Coefficient{col 36}  std. err.{col 48}      z{col 56}   P>|z|{col 64}     [95% con{col 77}f. interval]
{hline 23}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}ATE                    {txt}{c |}
{space 15}mbsmoke {c |}
(Smoker vs Nonsmoker)  {c |}{col 24}{res}{space 2} .0669093{col 36}{space 2} .0168094{col 47}{space 1}    3.98{col 56}{space 3}0.000{col 64}{space 4} .0339635{col 77}{space 3}  .099855
{txt}{hline 23}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}POmean                 {txt}{c |}
{space 15}mbsmoke {c |}
{space 12}Nonsmoker  {c |}{col 24}{res}{space 2} .0356086{col 36}{space 2} .0035124{col 47}{space 1}   10.14{col 56}{space 3}0.000{col 64}{space 4} .0287244{col 77}{space 3} .0424928
{txt}{hline 23}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}. ipdover, over(mmarried) or nograph : teffects ipw (lbweight) (mbsmoke mage medu)
{res}
{txt}Participants included: {res}4642{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} ATE:r1vs0.mbsmoke

{txt}{hline 25}{c TT}{hline 45}
{col 26}{c |}    Odds   
1 if mother married{col 26}{c |}   ratio   {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
Not married{col 26}{c |}{col 29}{res}  1.025{col 40}  0.991{col 50}  1.061{col 61}   1394
{txt}Married{col 26}{c |}{col 29}{res}  1.069{col 40}  1.035{col 50}  1.105{col 61}   3248
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res}  1.063{col 40}  1.038{col 50}  1.088{col 61}   4642
{txt}{hline 25}{c BT}{hline 45}

{com}. 
. // use of "prefix"
. ipdover, over(mmarried) or prefix(foo) clear nograph : teffects ipw (lbweight) (mbsmoke mage medu)
{res}
{txt}Participants included: {res}4642{txt}

Trial subgroup analysis of main (treatment) effect estimate{res} ATE:r1vs0.mbsmoke

{txt}{hline 25}{c TT}{hline 45}
{col 26}{c |}    Odds   
1 if mother married{col 26}{c |}   ratio   {col 39}[95% Conf. Interval]{col 62}No. pts
{hline 25}{c +}{hline 45}
Not married{col 26}{c |}{col 29}{res}  1.025{col 40}  0.991{col 50}  1.061{col 61}   1394
{txt}Married{col 26}{c |}{col 29}{res}  1.069{col 40}  1.035{col 50}  1.105{col 61}   3248
{txt}{hline 25}{c +}{hline 45}
Overall effect{col 26}{c |}{col 29}{res}  1.063{col 40}  1.038{col 50}  1.088{col 61}   4642
{txt}{hline 25}{c BT}{hline 45}

{com}. 
. /*
> // multiple "if" statements
> ipdover if mrace==0, over(mmarried) or nograph : teffects ipw (lbweight) (mbsmoke mage medu)
> ipdover            , over(mmarried) or nograph : teffects ipw (lbweight) (mbsmoke mage medu) if mrace==1
> cap nois ipdover if mrace==0, over(mmarried) or nograph : teffects ipw (lbweight) (mbsmoke mage medu) if mrace==1
> */
. 
. // use of "mi estimate, post" with stcox, tvc
. webuse mdrugtrs25, clear
{txt}(Patient survival in drug trial)

{com}. mi describe

{txt}{p 0 7 1}
Style: {res:mlong}{break}
{break}last {bf:mi update} 22dec2020 10:41:23,
137 days ago

Observations:
{col 4}Complete  {res}         40
{txt}{col 4}Incomplete{res}          8{txt}  ({it:M} = {res:25} imputations)
{col 4}{hline 21}
{col 4}Total     {res}         48

{txt}Variables:
{p 3 12 1}
Imputed: 1;
age({res:8})
{p_end}

{p 3 12 1}
Passive: 0
{p_end}

{p 3 12 1}
Regular: 3;
studytime died drug
{p_end}

{p 3 12 1}
System:{bind:  }3;
_mi_m _mi_id _mi_miss
{p_end}

{p 3 4 1}
(there are no unregistered variables)
{p_end}

{com}. gen byte study = mod(_mi_id, 3)
{txt}
{com}. mi stset studytime, failure(died)
{res}
{txt}Survival-time data settings

{col 10}Failure event: {res}died!=0 & died<.
{col 1}{txt}Observed time interval: {res}(0, studytime]
{col 6}{txt}Exit on or before: {res}failure

{txt}{hline 74}
{res}         48{txt}  total observations
{res}          0{txt}  exclusions
{hline 74}
{res}         48{txt}  observations remaining, representing
{res}         31{txt}  failures in single-record/single-failure data
{res}        744{txt}  total analysis time at risk and under observation
                                                At risk from t = {res}        0
                                     {txt}Earliest observed entry t = {res}        0
                                          {txt}Last observed exit t = {res}       39
{txt}
{com}. ipdmetan, study(study) nograph : mi estimate, post: stcox drug age, tvc(age)
{res}{error}Note: 1 study with missing or insufficient data found;
{error} use the {bf:{help metan##options_main:keepall}} option to include this study in the {error}summary table

{txt}Studies included: {res}2
{txt}Participants included: {res}32

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} main:drug
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
study{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
0{res}{txt}{col 22}{c |}{col 26}{res} -2.430{col 37} -4.254{col 47} -0.606{col 58}  57.32
{txt}2{res}{txt}{col 22}{c |}{col 26}{res} -2.790{col 37} -4.904{col 47} -0.677{col 58}  42.68
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res} -2.584{col 37} -3.965{col 47} -1.203{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res} -3.667{txt}  p = {res}0.000


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}   0.06{col 39}  1{col 46}  0.801
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  0.253{col 36}  1.000{col 46}  2.241
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}    0.0%{col 35}    0.0%{col 45}   80.1%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. // use of "mi estimate, post" with xtset
. webuse mjsps5, clear
{txt}(LEA Junior School Project data (Mortimore et al., 1988) with missing values)

{com}. mi describe

{txt}{p 0 7 1}
Style: {res:mlong}{break}
{break}last {bf:mi update} 22dec2020 10:41:23,
137 days ago

Observations:
{col 4}Complete  {res}        705
{txt}{col 4}Incomplete{res}        182{txt}  ({it:M} = {res:5} imputations)
{col 4}{hline 21}
{col 4}Total     {res}        887

{txt}Variables:
{p 3 12 1}
Imputed: 1;
math3({res:182})
{p_end}

{p 3 12 1}
Passive: 0
{p_end}

{p 3 12 1}
Regular: 2;
school math5
{p_end}

{p 3 12 1}
System:{bind:  }3;
_mi_m _mi_id _mi_miss
{p_end}

{p 3 4 1}
(there are no unregistered variables)
{p_end}

{com}. gen byte study = mod(_mi_id, 3)
{txt}
{com}. mi xtset school
{res}
{txt}{col 1}Panel variable: {res}school{txt} (unbalanced)
{res}{txt}
{com}. ipdmetan, study(study) nograph : mi estimate, post: xtreg math5 math3
{res}
{txt}Studies included: {res}3
{txt}Participants included: {res}887

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} math3
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
study{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
0{res}{txt}{col 22}{c |}{col 26}{res}  0.489{col 37}  0.376{col 47}  0.603{col 58}  36.17
{txt}1{res}{txt}{col 22}{c |}{col 26}{res}  0.657{col 37}  0.539{col 47}  0.774{col 58}  33.88
{txt}2{res}{txt}{col 22}{c |}{col 26}{res}  0.674{col 37}  0.549{col 47}  0.798{col 58}  29.95
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.601{col 37}  0.533{col 47}  0.669{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res} 17.266{txt}  p = {res}0.000


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}   5.89{col 39}  2{col 46}  0.053
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.716{col 36}  1.000{col 46}  2.904
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   66.0%{col 35}    0.0%{col 45}   88.1%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. // use of "mi estimate, post" with mixed
. ipdmetan, study(study) nograph : mi estimate, post: mixed math5 math3 || school:, reml
{res}
{txt}Studies included: {res}3
{txt}Participants included: {res}887

{txt}Meta-analysis pooling of main (treatment) effect estimate{res} math5:math3
{txt}using the {res}common-effect inverse-variance{txt} model
{res}
{txt}{hline 21}{c TT}{hline 46}
study{col 22}{c |}   Effect   {col 36}[95% Conf. Interval]{col 59}% Weight
{hline 21}{c +}{hline 46}
0{res}{txt}{col 22}{c |}{col 26}{res}  0.489{col 37}  0.375{col 47}  0.603{col 58}  36.10
{txt}1{res}{txt}{col 22}{c |}{col 26}{res}  0.655{col 37}  0.538{col 47}  0.773{col 58}  33.90
{txt}2{res}{txt}{col 22}{c |}{col 26}{res}  0.673{col 37}  0.549{col 47}  0.798{col 58}  30.00
{txt}{hline 21}{c +}{hline 46}
Overall, IV{col 22}{c |}{col 26}{res}  0.601{col 37}  0.532{col 47}  0.669{col 58} 100.00
{txt}{hline 21}{c BT}{hline 46}

Test of overall effect = {res}0{txt}:  {res}z{txt} = {res} 17.243{txt}  p = {res}0.000


{txt}Heterogeneity measures, calculated from the data
with Conf. Intervals based on {res}non-central chi{c 178} (common-effect){txt} distribution for Q
{hline 21}{c TT}{hline 35}
Measure{col 22}{c |}{col 28}Value{col 39}df{col 47}p-value
{hline 21}{c +}{hline 35}
Cochran's Q{col 22}{c |}{col 26}{res}   5.84{col 39}  2{col 46}  0.054
{txt}{col 22}{c |}{col 35}{hline 1}[95% Conf. Interval]{hline 1}
H {col 22}{c |}{col 26}{res}  1.709{col 36}  1.000{col 46}  2.896
{txt}I{c 178} (%) {col 22}{c |}{col 25}{res}   65.8%{col 35}    0.0%{col 45}   88.1%
{txt}{hline 21}{c BT}{hline 35}
H = relative excess in Cochran's Q over its degrees-of-freedom
I{c 178} = proportion of total variation in effect estimate due to between-study heterogeneity (based on Q)

{com}. 
. 
. ***********************************
. 
. log close ipdmetan
      {txt}name:  {res}ipdmetan
       {txt}log:  {res}S:/MRCCTU_Methodology/Software/Meta-analysis/metan/Validation/3. Interface with ipdmetan/metan_test_29Nov2021_log.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}29 Nov 2021, 23:04:23
{txt}{.-}
{smcl}
{txt}{sf}{ul off}